(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31611b1c"],{4442:function(e,t,n){"use strict";n("d53e")},"76a4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"menu flex"},[t("div",{staticClass:"menu-left flex-1"},[t("el-table",{ref:"roleTypeTable",staticStyle:{width:"100%"},attrs:{data:e.adminRoleTypes,"highlight-current-row":""},on:{"row-click":e.handleCurrentChange}},[t("el-table-column",{attrs:{type:"index","min-width":"55"}}),t("el-table-column",{attrs:{prop:"typeCode",label:"类型编码","min-width":"80"}}),t("el-table-column",{attrs:{prop:"typeName",label:"类型名称","min-width":"160"}})],1)],1),t("div",{staticClass:"menu-right flex flex-v"},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:e.saveMenuConfigs}},[e._v("\n      保存\n    ")]),t("el-tree",{ref:"menuTree",staticClass:"flex-1 menu-tree",attrs:{data:e.menus,props:e.props,"show-checkbox":"","node-key":"id","default-expand-all":"",draggable:""},on:{"node-drop":e.handleDragEnter,"node-drag-over":e.handleDragOver}})],1)])},i=[],s=(n("7afe"),n("a450"),n("f13c")),r=n("ae5e"),u=n("acac"),o=n("2ad3"),c=n("e0e5"),l=n("fd63"),d=n("e4a1");function h(e){var t=f();return function(){var n,a=Object(c["a"])(e);if(t){var i=Object(c["a"])(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Object(o["a"])(this,n)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){Object(u["a"])(n,e);var t=h(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.adminRoleTypes=[],e.currentRow={},e.menus=[],e.name="",e.originalCheckedMenuCodes=[],e.props={children:"children",label:"label"},e}return Object(r["a"])(n,[{key:"mounted",value:function(){this.listAllAdminRoleTypes(),this.menuTree()}},{key:"handleDragEnter",value:function(e,t,n,a){var i=this;this.like(e,t),t.key!==e.key&&""!==this.name?this.$confirm("确认将【"+e.label+"】菜单移入【"+this.name+"】模块么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.updateMenu(e,t,n,a),i.menuTree()})).catch((function(){i.menuTree()})):(this.updateMenu(e,t,n,a),this.menuTree())}},{key:"handleDragOver",value:function(e,t,n){this.like(e,t)}},{key:"updateMenu",value:function(e,t,n,a){var i=this,s={codeLeave:e.key,codeEnter:t.key,dropType:n};this.$api.updateMenu(s).then((function(e){200===e.status&&i.$message.success("操作成功"),i.menuTree()})).catch((function(e){}))}},{key:"like",value:function(e,t){var n=this,a={codeLeave:e.key,codeEnter:t.key};this.$api.like(a).then((function(e){var t=e.data||[];e.data?n.name=t.name:n.name=""})).catch((function(e){}))}},{key:"handleCurrentChange",value:function(e){this.currentRow=e,this.$refs.roleTypeTable.setCurrentRow(e),this.listMenuCodes()}},{key:"listAllAdminRoleTypes",value:function(){var e=this;this.$api.listAllAdminRoleTypes().then((function(t){e.adminRoleTypes=t.data||[],e.adminRoleTypes.length&&(e.$refs.roleTypeTable.setCurrentRow(e.adminRoleTypes[0]),e.currentRow=e.adminRoleTypes[0],e.listMenuCodes())})).catch((function(e){}))}},{key:"listMenuCodes",value:function(){var e=this;this.$api.listMenuCodes({roleTypeCode:this.currentRow.typeCode}).then((function(t){e.originalCheckedMenuCodes=t.data||[],e.$refs.menuTree.setCheckedKeys(e.originalCheckedMenuCodes)})).catch((function(e){}))}},{key:"menuTree",value:function(){var e=this;this.$api.menuTree({group:!0}).then((function(t){e.menus=t.data||[]})).catch((function(e){}))}},{key:"saveMenuConfigs",value:function(){var e=this,t=this.currentRow.typeCode,n=this.$refs.menuTree.getCheckedKeys();this.$api.saveRelationsOfMenuAndRoleType({typeCode:t,menuCodes:n.join(",")}).then((function(t){e.$message.success("保存成功"),e.menus=t.data||[]})).catch((function(e){}))}}]),n}(d["c"]);p=Object(l["a"])([Object(d["a"])({name:"Menu"})],p);var y=p,m=y,v=(n("4442"),n("0b56")),k=Object(v["a"])(m,a,i,!1,null,"e23855fe",null);t["default"]=k.exports},d53e:function(e,t,n){}}]);