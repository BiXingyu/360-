(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a1d6aa5"],{2744:function(t,e,a){"use strict";a.r(e);a("a450");var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"dataDimension"},[e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.changeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"今天",name:"0"}}),e("el-tab-pane",{attrs:{label:"昨天",name:"1"}}),e("el-tab-pane",{attrs:{label:"最近7天",name:"2"}}),e("el-tab-pane",{attrs:{label:"最近30天",name:"3"}}),e("el-tab-pane",{attrs:{label:"自定义日期",name:"4"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:"4"===t.activeName,expression:"activeName === '4'"}],staticClass:"date-pick"},[e("el-date-picker",{attrs:{type:"daterange",clearable:!1,placeholder:"选择日期范围","picker-options":t.pickerBeginDateBefore},on:{change:function(e){return t.changeDate()}},model:{value:t.dateRangeVal,callback:function(e){t.dateRangeVal=e},expression:"dateRangeVal"}})],1),e("div",{staticClass:"title"},[t._v("各系统访问情况")]),e("div",{staticClass:"select-box"},[e("span",[t._v("选择科室")]),e("el-select",{attrs:{filterable:"",placeholder:"全院"},on:{change:t.getData},model:{value:t.defaultDepartmentOption,callback:function(e){t.defaultDepartmentOption=e},expression:"defaultDepartmentOption"}},t._l(t.departmentOptions,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.code}})})),1)],1),e("div",{staticClass:"dimension-chart"},[e("div",{attrs:{id:"dimension-chart"}})]),e("div",{staticClass:"dimension-detail"},[e("span",{staticClass:"circle",style:{backgroundColor:t.detailChartTitleColor}},[t._v(".")]),t._v("\n      "+t._s(t.activeClientName)+"资料受访情况\n      "),e("div",{attrs:{id:"dimension-detail"}})])],1)],1)},n=[],r=(a("7afe"),a("f13c")),s=a("ae5e"),o=a("acac"),l=a("2ad3"),c=a("e0e5"),d=a("fd63"),h=a("e4a1"),m=a("4d28"),u=a.n(m);function p(t){var e=f();return function(){var a,i=Object(c["a"])(t);if(e){var n=Object(c["a"])(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return Object(l["a"])(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var D=function(t){Object(o["a"])(a,t);var e=p(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.departmentOptions=[],t.defaultDepartmentOption="",t.dateRangeVal=[],t.beginDay=t.$moment(new Date).format("YYYY-MM-DD"),t.endDay=t.$moment(new Date).format("YYYY-MM-DD"),t.barChartSeries=[],t.client="",t.clientList=[],t.detailBarChartSeries=[],t.detailBarChartxAxis=[],t.barChart=null,t.detailBarChart=null,t.activeName="0",t.pickerBeginDateBefore={disabledDate:function(t){return t.getTime()>Date.now()}},t.activeClientName="",t.detailChartTitleColor="#c23531",t}return Object(s["a"])(a,[{key:"mounted",value:function(){this.getAllDepartment(),this.getData()}},{key:"getAllDepartment",value:function(){var t=this;this.$api.listAllDepts().then((function(e){e.data&&(t.departmentOptions=e.data,t.departmentOptions.unshift({code:"",id:0,name:"全院",note:"",orderno:"",syfw:"",yljgdm:""}))})).catch((function(t){}))}},{key:"changeDate",value:function(){null!==this.dateRangeVal[0]&&(this.beginDay=this.$moment(this.dateRangeVal[0]).format("YYYY-MM-DD"),this.endDay=this.$moment(this.dateRangeVal[1]).format("YYYY-MM-DD")),this.getData()}},{key:"getData",value:function(){this.getResourceRate(),this.getResourceDetail()}},{key:"getResourceRate",value:function(){var t=this,e={ksdm:this.defaultDepartmentOption,beginDay:this.beginDay,endDay:this.endDay};this.$api.getResourceRate(e).then((function(e){t.clientList=[],t.barChartSeries=[],e.data&&(t.barChartSeries=e.data.map((function(t){return{name:t.clientName,type:"bar",stack:"总量",data:[{value:t.rate,num:t.num}]}})),t.clientList=e.data.map((function(t){return t.clientCode})),t.client=t.clientList[0]),t.renderbarChart(),t.detailChartTitleColor="#c23531",t.getResourceDetail()})).catch((function(t){}))}},{key:"getResourceDetail",value:function(){var t=this,e={client:this.client,ksdm:this.defaultDepartmentOption,beginDay:this.beginDay,endDay:this.endDay};this.$api.getResourceDetail(e).then((function(e){t.detailBarChartSeries=[],t.detailBarChartxAxis=[],e.data&&(t.detailBarChartSeries=e.data.map((function(t){return t.num})),t.detailBarChartxAxis=e.data.map((function(t){return t.moduleName})),t.renderDetailBar())})).catch((function(t){}))}},{key:"changeTab",value:function(){if("4"===this.activeName)this.dateRangeVal=[this.$moment(new Date).format("YYYY-MM-DD"),this.$moment(new Date).format("YYYY-MM-DD")],this.beginDay=this.$moment(new Date).format("YYYY-MM-DD"),this.endDay=this.$moment(new Date).format("YYYY-MM-DD"),this.getData();else switch(this.activeName){case"0":this.beginDay=this.$moment(this.dateRangeVal[1]).format("YYYY-MM-DD"),this.endDay=this.$moment(this.dateRangeVal[1]).format("YYYY-MM-DD");break;case"1":this.beginDay=this.$moment(new Date).add(-1,"day").format("YYYY-MM-DD"),this.endDay=this.$moment(new Date).add(-1,"day").format("YYYY-MM-DD");break;case"2":this.beginDay=this.$moment(new Date).add(-7,"day").format("YYYY-MM-DD"),this.endDay=this.$moment(this.dateRangeVal[1]).format("YYYY-MM-DD");break;case"3":this.beginDay=this.$moment(new Date).add(-30,"day").format("YYYY-MM-DD"),this.endDay=this.$moment(this.dateRangeVal[1]).format("YYYY-MM-DD");break}this.getResourceRate(),this.getResourceDetail()}},{key:"renderbarChart",value:function(){var t=this;u.a.init(document.getElementById("dimension-chart")).dispose(),this.barChart=u.a.init(document.getElementById("dimension-chart"));var e={tooltip:{trigger:"item",axisPointer:{type:"shadow"},backgroundColor:"tranparent",formatter:function(t){var e=[];return e.push('<div style="cursor:pointer;min-width:50px;height:auto;background: #FFFFFF;box-shadow: 0 0 3px 0 #A6A6A6;border-radius: 2px;padding:5px 15px 5px 20px;">'),e.push('<p style="margin-bottom: 5px"><span style="font-size:12px;color:#b2bfcf;margin: 0 5px 0 0;width: 50px;">客户端：</span><span style="font-size:12px;color:#53a0ea;">'),e.push(t.seriesName),e.push("："),e.push(t.value),e.push("%"),e.push("</span></p>"),e.push('<p style="margin-bottom: 5px"><span style="font-size:12px;color:#b2bfcf;margin: 0 5px 0 0;width: 50px;">访问人次：</span><span style="font-size:12px;color:#53a0ea;">'),e.push(t.data.num),e.push("</div>"),e.join("")}},grid:{left:"3%",right:"1%",bottom:"0%",top:"0%"},xAxis:{show:!1,type:"value"},yAxis:{show:!1,type:"category",data:["周一"]},series:this.barChartSeries};this.barChart.setOption(e),this.barChart.on("click",(function(e){t.detailChartTitleColor=e.color,t.activeClientName=e.seriesName,t.client=t.clientList[e.seriesIndex],t.getResourceDetail()}))}},{key:"renderDetailBar",value:function(){if(u.a.init(document.getElementById("dimension-detail")).dispose(),this.detailBarChartSeries.length){this.detailBarChart=u.a.init(document.getElementById("dimension-detail"));var t={color:[this.detailChartTitleColor],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"1%",bottom:"25%",top:"2%"},xAxis:[{type:"category",data:this.detailBarChartxAxis,axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value",max:function(t){return t.max<100?t.max+10:t.max+100}}],series:[{name:"访问次数",type:"bar",barWidth:"60%",barMaxWidth:"20%",label:{normal:{show:!0,position:"top"}},data:this.detailBarChartSeries,itemStyle:{normal:{barBorderRadius:4}}}]};this.detailBarChart.setOption(t)}}}]),a}(h["c"]);D=Object(d["a"])([Object(h["a"])({name:"dataDimension"})],D);var b=D,g=b,y=(a("f313"),a("0b56")),Y=Object(y["a"])(g,i,n,!1,null,"93f38926",null);e["default"]=Y.exports},b244:function(t,e,a){},f313:function(t,e,a){"use strict";a("b244")}}]);