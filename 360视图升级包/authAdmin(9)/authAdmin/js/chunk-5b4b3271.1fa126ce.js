(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b4b3271"],{"02da":function(e,t,o){"use strict";o("a922")},"897f":function(e,t,o){},"8b42":function(e,t,o){"use strict";o.r(t);o("a450");var l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"handleLogContainer"},[t("div",{staticClass:"handleLogDialog"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"闭环类别："}},[t("el-select",{attrs:{placeholder:""},on:{change:e.changeCloseLoopType},model:{value:e.closeLoopType,callback:function(t){e.closeLoopType=t},expression:"closeLoopType"}},e._l(e.closeLoopTypeData,(function(e,o){return t("el-option",{key:o,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"操作日志："}},[t("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围","unlink-panels":"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerBeginDateBefore},model:{value:e.dateRangeVal,callback:function(t){e.dateRangeVal=t},expression:"dateRangeVal"}})],1),t("el-form-item",{attrs:{label:"操作类型"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.handleType,callback:function(t){e.handleType=t},expression:"handleType"}},[t("el-option",{attrs:{label:"全部",value:"全部"}}),e._l(e.czlxList,(function(e,o){return t("el-option",{key:o,attrs:{label:e,value:e}})}))],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getData(!0)}}},[e._v("查询")])],1)],1),t("div",{staticClass:"title"},[t("p",{staticClass:"name"},[e._v("闭环"+e._s("ruleConfig"===e.scriptMaintainItem.source?"规则":"节点")+"配置操作日志")]),"ruleConfig"===e.scriptMaintainItem.source?t("div",{staticClass:"numInfo"},[t("p",[e._v("新增规则："+e._s(e.addDomNum)+"次")]),t("p",[e._v("修改规则："+e._s(e.editDomNum)+"次")]),t("p",[e._v("删除规则："+e._s(e.deleteDomNum)+"次")])]):t("div",{staticClass:"numInfo"},[t("p",[e._v("新增节点："+e._s(e.addDomNum)+"次")]),t("p",[e._v("修改节点："+e._s(e.editDomNum)+"次")]),t("p",[e._v("删除节点："+e._s(e.deleteDomNum)+"次")])])]),t("div",{staticClass:"table"},["ruleConfig"===e.scriptMaintainItem.source?t("el-table",{staticStyle:{width:"100%",border:"1px solid #ccc"},attrs:{data:e.tableData,border:"","tooltip-effect":"light","header-cell-style":{background:"#eaeefe",color:"#000000",borderColor:"#cccccc"},"cell-style":{borderColor:"#cccccc"}}},[t("el-table-column",{attrs:{prop:"cslxmc",width:"150",label:"闭环类别"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",[e._v(e._s(o.row.closeLoopType))])]}}],null,!1,3904076680)}),t("el-table-column",{attrs:{prop:"gzms",label:"原来(新增)规则描述"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",{domProps:{innerHTML:e._s(e.gzFliter(o.row.gzms))}})]}}],null,!1,1966547072)}),t("el-table-column",{attrs:{prop:"czgzms",label:"修改后规则描述"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",{domProps:{innerHTML:e._s(e.gzFliter(o.row.czgzms))}})]}}],null,!1,4170970073)}),t("el-table-column",{attrs:{prop:"createTime",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.createTime.substring(0,19)))])]}}],null,!1,1382377693)}),t("el-table-column",{attrs:{prop:"czr",label:"操作人员"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",[e._v(e._s(o.row.czr))])]}}],null,!1,1699295249)}),t("el-table-column",{attrs:{prop:"ipDdds",label:"请求地址"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",[e._v(e._s(o.row.ipDdds))])]}}],null,!1,3243977140)}),t("el-table-column",{attrs:{prop:"type",label:"操作类型"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",{class:{add:o.row.type.indexOf("新增")>-1,edit:o.row.type.indexOf("修改")>-1,delete:o.row.type.indexOf("删除")>-1}},[e._v(e._s(o.row.type))])]}}],null,!1,882058075)})],1):t("el-table",{staticStyle:{width:"100%",border:"1px solid #ccc"},attrs:{data:e.tableData,border:"","tooltip-effect":"light","header-cell-style":{background:"#eaeefe",color:"#000000",borderColor:"#cccccc"},"cell-style":{borderColor:"#cccccc"}}},[t("el-table-column",{attrs:{label:"闭环类别"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",[e._v(e._s(o.row.closeLoopType))])]}}])}),t("el-table-column",{attrs:{prop:"bhjdbm",label:"节点编码"}}),t("el-table-column",{attrs:{prop:"bhjdmc",label:"别名"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.bhjdmc===o.row.xghjdmc||o.row.czlx.indexOf("删除")>-1?t("p",[e._v(e._s(o.row.bhjdmc))]):t("p",[e._v(e._s(o.row.bhjdmc+"→"+o.row.xghjdmc))])]}}])}),t("el-table-column",{attrs:{prop:"kx",label:"可选"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.kx===o.row.xgkx||o.row.czlx.indexOf("删除")>-1?t("p",[e._v(e._s(o.row.kx))]):t("p",[e._v(e._s(o.row.kx+"→"+o.row.xgkx))])]}}])}),t("el-table-column",{attrs:{prop:"zz",label:"终止"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.zz===o.row.xgzz||o.row.czlx.indexOf("删除")>-1?t("p",[e._v(e._s(o.row.zz))]):t("p",[e._v(e._s(o.row.zz+"→"+o.row.xgzz))])]}}])}),t("el-table-column",{attrs:{prop:"sszxlc",label:"所属正向流程"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.sszxlc===o.row.xgsszxlc||o.row.czlx.indexOf("删除")>-1||"未修改"===o.row.xgsszxlc?t("p",[e._v(e._s(o.row.sszxlc))]):t("p",[e._v(e._s(o.row.sszxlc+"→"+o.row.xgsszxlc))])]}}])}),t("el-table-column",{attrs:{prop:"fzh",label:"分组号"},scopedSlots:e._u([{key:"default",fn:function(o){return["未修改"===o.row.xgfzh||o.row.fzh===o.row.xgfzh||o.row.czlx.indexOf("删除")>-1?t("p",[e._v(e._s(o.row.fzh))]):t("p",[e._v(e._s(o.row.fzh+"→"+o.row.xgfzh))])]}}])}),t("el-table-column",{attrs:{label:"顺序"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.pxbh===o.row.xgpxbh||o.row.czlx.indexOf("删除")>-1?t("p",[e._v(e._s(o.row.pxbh))]):t("p",[e._v(e._s(o.row.pxbh+"→"+o.row.xgpxbh))])]}}])}),t("el-table-column",{attrs:{prop:"bzsj",label:"标准时间"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.bzsj===o.row.xgbzsj||o.row.czlx.indexOf("删除")>-1?t("p",[e._v(e._s(o.row.bzsj))]):t("p",[e._v("\n              "+e._s("".concat("未填写"===o.row.bzsj?"":o.row.bzsj).concat("未填写"===o.row.bzsj&&"未修改"===o.row.xgbzsj?"":"→").concat("未修改"===o.row.xgbzsj?"":o.row.xgbzsj))+"\n            ")])]}}])}),t("el-table-column",{attrs:{prop:"sjy",label:"数据源"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.sjy===o.row.xgsjy||o.row.czlx.indexOf("删除")>-1||"空"===o.row.xgsjy?t("p",[e._v(e._s(o.row.sjy?o.row.sjy:"空"))]):t("p",[e._v("\n              "+e._s("".concat("未填写"===o.row.sjy?"":o.row.sjy).concat("未填写"===o.row.sjy&&"未修改"===o.row.xgsjy?"":"→").concat("未修改"===o.row.xgsjy?"":o.row.xgsjy))+"\n            ")])]}}])}),e.showSqlTab?t("el-table-column",{attrs:{label:"脚本维护"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.jbwhsql===o.row.xgjbwhsql?t("div",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"500",trigger:"hover",content:o.row.jbwhsql||"空"}},[t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("脚本1")])],1)],1):t("div",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"500",trigger:"hover",content:o.row.jbwhsql||"空"}},[t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("脚本1")])],1),t("span",[e._v("→")]),t("el-popover",{attrs:{placement:"top-start",title:"",width:"500",trigger:"hover",content:o.row.xgjbwhsql||"空"}},[t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("脚本2")])],1)],1)]}}],null,!1,1456347819)}):e._e(),t("el-table-column",{attrs:{prop:"createTime",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(o.row.createTime.substring(0,19)))])]}}])}),t("el-table-column",{attrs:{prop:"czr",label:"操作人员"}}),t("el-table-column",{attrs:{prop:"ipDdds",label:"请求地址"}}),t("el-table-column",{attrs:{prop:"czlx",label:"操作类型"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("p",{class:{add:o.row.czlx.indexOf("新增")>-1,edit:o.row.czlx.indexOf("修改")>-1,delete:o.row.czlx.indexOf("删除")>-1}},[e._v(e._s(o.row.czlx))])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px",float:"right","padding-bottom":"20px"},attrs:{background:"",layout:"total, prev, pager, next","current-page":e.page,"page-size":e.size,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},a=[],n=(o("7afe"),o("fc02"),o("8dee"),o("4057"),o("1bc7"),o("f13c")),r=o("ae5e"),s=o("acac"),c=o("2ad3"),i=o("e0e5"),p=o("fd63"),u=o("e4a1");function d(e){var t=f();return function(){var o,l=Object(i["a"])(e);if(t){var a=Object(i["a"])(this).constructor;o=Reflect.construct(l,arguments,a)}else o=l.apply(this,arguments);return Object(c["a"])(this,o)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(s["a"])(o,e);var t=d(o);function o(){var e;return Object(n["a"])(this,o),e=t.apply(this,arguments),e.pickerBeginDateBefore={},e.dateRangeVal=[e.$moment(new Date).format("YYYY-MM-DD"),e.$moment(new Date).add(1,"day").format("YYYY-MM-DD")],e.closeLoopItem={id:"",jlzt:2,lb:0,memo:"",mzzy:2,name:"",ywy:""},e.closeLoopType="",e.handleType="全部",e.tableData=[],e.showSqlTab=!1,e.total=0,e.page=1,e.size=10,e.scriptMaintainItem={},e.sourceListDatas=[],e.showLoading=!1,e.closeLoopTypeData=[],e.closeLoopTypeObj={},e.closeLoopTypeIndex=0,e.addDomNum=0,e.editDomNum=0,e.deleteDomNum=0,e.czlxList=[],e}return Object(r["a"])(o,[{key:"mounted",value:function(){this.scriptMaintainItem=this.$route.query,this.showSqlTab=-1===window.CONFIG.iframeUrl.indexOf("/bh/closeloop"),this.getCzlx(),this.listcloseLoopTypeFilter()}},{key:"changeCloseLoopType",value:function(){sessionStorage.setItem("loopId",this.closeLoopType)}},{key:"getCzlx",value:function(){var e=this;this.$api.getCzlx().then((function(t){e.czlxList=t.data||[],e.getData()})).catch((function(e){console.log(e)}))}},{key:"listcloseLoopTypeFilter",value:function(){var e=this;this.$api.listCloseLoopType().then((function(t){e.closeLoopTypeObj={},e.closeLoopTypeData=t.data||[],e.closeLoopTypeData.length&&(e.closeLoopTypeData.forEach((function(t,o){sessionStorage.getItem("loopId")===t.id&&(e.closeLoopType=e.closeLoopTypeData[o].id),e.$set(e.closeLoopTypeObj,t.id.toString(),t.name)})),e.getCzlx())})).catch((function(){}))}},{key:"getData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.page=1),this.getHandleInfo();var o=null,l={bhlbdm:this.closeLoopType,begin:this.dateRangeVal[0]+" 00:00:00",end:this.dateRangeVal[1]+" 23:59:59",czlx:this.handleType,page:this.page,size:this.size};o="ruleConfig"===this.scriptMaintainItem.source?this.$api.getBhgzLog(l):this.$api.getBhjdwhLog(l),this.showLoading=!0,o.then((function(t){e.showLoading=!1,e.tableData=t.data.content,e.total=t.data.totalElements,console.log(e.closeLoopType),console.log(e.closeLoopTypeObj[e.closeLoopType]),e.tableData.forEach((function(t){t.closeLoopType=e.closeLoopTypeObj[e.closeLoopType]}))})).catch((function(t){console.log(t),e.showLoading=!1}))}},{key:"gzFliter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return t=e.replace(/\(/g,""),t=t.replace(/\)/g,""),t=t.replace(/\[/g,""),t=t.replace(/\]/g,""),t.indexOf(",")>-1?'<span style="font-weight: bold;font-size: 14px;">'.concat(t.split(",")[0]||"","</span>").concat(t.split(",")[1]):t}},{key:"handleCurrentChange",value:function(e){this.page=e,this.getData()}},{key:"getHandleInfo",value:function(){var e=this,t=null,o={bhlbdm:this.closeLoopType,begin:this.dateRangeVal[0]+" 00:00:00",end:this.dateRangeVal[1]+" 23:59:59"};t="ruleConfig"===this.scriptMaintainItem.source?this.$api.getBhgzLogdel(o):this.$api.getBhjdwhLogdel(o),t.then((function(t){if(t.data&&t.data[0]){var o=t.data[0];e.addDomNum=o.xzMath,e.editDomNum=o.xgMath,e.deleteDomNum=o.scMath}})).catch((function(e){console.log(e)}))}}]),o}(u["c"]);b=Object(p["a"])([Object(u["a"])({name:"handleLog"})],b);var h=b,g=h,m=(o("b7af"),o("02da"),o("0b56")),y=Object(m["a"])(g,l,a,!1,null,"450add8c",null);t["default"]=y.exports},a922:function(e,t,o){},b7af:function(e,t,o){"use strict";o("897f")}}]);