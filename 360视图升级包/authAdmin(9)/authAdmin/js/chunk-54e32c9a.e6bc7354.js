(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54e32c9a"],{5584:function(e,t,o){"use strict";o.r(t);o("a450");var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"display-query"},[t("div",{staticClass:"display-query-left flex flex-v"},[t("div",{staticClass:"left-input"},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},on:{clear:e.likeCloseLoopType},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.likeCloseLoopType.apply(null,arguments)}},model:{value:e.searchTypeName,callback:function(t){e.searchTypeName=t},expression:"searchTypeName"}})],1),t("span",{staticClass:"config-span"},[e._v("闭环类别")]),0===e.closeLoopTypeData.length?t("span",{staticClass:"no-data"},[e._v("暂无数据")]):e._e(),t("ul",{staticClass:"closeLoop-menu flex-1"},e._l(e.closeLoopTypeData,(function(o,a){return t("li",{key:a,class:{active:a===e.closeLoopTypeIndex},attrs:{title:o.name},on:{click:function(t){return e.changeCloseLoopType(o,a)}}},[e._v("\n        "+e._s(o.name)+"\n      ")])})),0)]),t("div",{staticClass:"display-query-right flex flex-v"},[t("div",{staticClass:"mb-20"},[t("el-date-picker",{ref:"datePicker",attrs:{type:"daterange","picker-options":e.pickerOption,"value-format":"yyyy-MM-dd",placeholder:"选择日期范围","unlink-panels":""},model:{value:e.dateRangeVal,callback:function(t){e.dateRangeVal=t},expression:"dateRangeVal"}}),t("el-input",{staticClass:"w-300 ml-20",attrs:{placeholder:"请输入完整的姓名,首页序号,病历号",clearable:""},on:{clear:function(t){return e.beforeFormatCode(e.closeLoopItem)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),t("el-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:function(t){return e.beforeFormatCode(e.closeLoopItem)}}},[e._v("查询\n      ")]),e.showCloseloopHistoryFilter?t("el-checkbox",{staticStyle:{"margin-left":"10px"},on:{change:function(t){return e.beforeFormatCode(e.closeLoopItem)}},model:{value:e.showHistorytype,callback:function(t){e.showHistorytype=t},expression:"showHistorytype"}},[e._v("历史数据查询")]):e._e()],1),t("div",{staticClass:"flex-1",staticStyle:{"overflow-y":"auto"}},[t("el-table",{attrs:{data:e.displayQueryData}},[t("el-table-column",{attrs:{prop:"hzxm",label:"姓名"}}),t("el-table-column",{attrs:{prop:"syxh",label:"首页序号"}}),t("el-table-column",{attrs:{prop:"blh",label:"病历号","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"yzxh",label:"医嘱序号"}}),t("el-table-column",{attrs:{prop:"yznr",label:"医嘱内容","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"cqlsbz",label:"长期临时标志",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-tag",{attrs:{type:1==o.row.cqlsbz?"success":"warning","disable-transitions":""}},[e._v(e._s(1==o.row.cqlsbz?"长期":"临时")+"\n            ")])]}}])}),t("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(o){return[e.showHistorytype?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showIframe(o.row)}}},[e._v("节点状态\n            ")]):t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                当前节点: "+e._s(o.row.nowCode)),t("br"),e._v("点击查看环展示信息\n              ")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showIframe(o.row)}}},[e._v(e._s(o.row.nowCode)+"\n              ")])],1)]}}])}),t("el-table-column",{attrs:{prop:"time",label:"时间","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"memo",label:"备注","show-overflow-tooltip":!0}})],1),t("pagination",{attrs:{page:e.page,size:e.size,total:e.total},on:{"update:page":function(t){e.page=t},"update:size":function(t){e.size=t},getTableData:e.formatCode}})],1)]),t("el-dialog",{attrs:{title:"埋点明细",visible:e.showCodeList,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.showCodeList=t}}},[t("el-table",{attrs:{data:e.codeListTable,"max-height":"480px"}},[t("el-table-column",{staticStyle:{width:"45%"},attrs:{prop:"eventCode",label:"节点编码"}}),t("el-table-column",{staticStyle:{width:"35%"},attrs:{prop:"eventName",label:"节点名称"}}),t("el-table-column",{staticStyle:{width:"30%"},attrs:{prop:"remarks",label:"备注"}})],1)],1),t("el-dialog",{staticClass:"closeLoop-dialog",attrs:{visible:e.showCloseLoop,"close-on-click-modal":!1,width:"70%",height:"100%",fullscreen:e.dialogFull},on:{"update:visible":function(t){e.showCloseLoop=t},closed:function(t){e.dialogFull=!1}}},[t("template",{slot:"title"},[t("div",{staticClass:"avue-crud__dialog__header"},[t("span",{staticClass:"el-dialog__title"},[t("span",{staticStyle:{display:"inline-block","background-color":"#3478f5",width:"3px",height:"20px","margin-right":"5px",float:"left","margin-top":"2px"}}),e._v("\n          闭环展示\n        ")]),t("div",{staticClass:"avue-crud__dialog__menu",on:{click:function(t){e.dialogFull?e.dialogFull=!1:e.dialogFull=!0}}},[t("i",{staticClass:"el-icon-full-screen"})])])]),t("iframe",{ref:"closeLoopShow",staticClass:"closeLoop-iframe"})],2)],1)},s=[],l=(o("7afe"),o("f13c")),n=o("ae5e"),i=o("acac"),c=o("2ad3"),r=o("e0e5"),p=o("fd63"),u=o("e4a1"),h=o("a349"),d=o("6407");function f(e){var t=y();return function(){var o,a=Object(r["a"])(e);if(t){var s=Object(r["a"])(this).constructor;o=Reflect.construct(a,arguments,s)}else o=a.apply(this,arguments);return Object(c["a"])(this,o)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m={dateRangeVal:[]},b=function(e){Object(i["a"])(o,e);var t=f(o);function o(){var e;return Object(l["a"])(this,o),e=t.apply(this,arguments),e.page=1,e.size=10,e.total=0,e.closeLoopTypeData=[],e.closeLoopItem={id:"",jlzt:2,lb:0,memo:"",mzzy:2,name:"",ywy:""},e.closeLoopTypeIndex=0,e.searchTypeName="",e.dateRangeVal=[e.$moment(new Date).format("YYYY-MM-DD"),e.$moment(new Date).format("YYYY-MM-DD")],e.pickerOption={onPick:function(t){var o=t.minDate.getTime()-6048e5;m.dateRangeVal=[e.$moment(new Date(o)).format("YYYY-MM-DD"),e.$moment(t.minDate).format("YYYY-MM-DD")],m.$refs.datePicker.handleClose()}},e.searchKey="",e.displayQueryData=[],e.codeListTable=[],e.showCodeList=!1,e.showCloseLoop=!1,e.showCloseloopHistoryFilter=!1,e.showHistorytype=!1,e.dialogFull=!1,e}return Object(n["a"])(o,[{key:"mounted",value:function(){m=this,this.listCloseLoopType(),this.showCloseloopHistoryFilter=window.CONFIG.showCloseloopHistoryFilter}},{key:"listCloseLoopType",value:function(){var e=this;this.$api.listCloseLoopType().then((function(t){e.closeLoopTypeData=t.data||[],e.closeLoopTypeData.length&&(e.closeLoopItem=e.closeLoopTypeData[0],e.formatCode())})).catch((function(){}))}},{key:"likeCloseLoopType",value:function(){var e=this;this.$api.likeCloseLoopType({searchKey:this.searchTypeName}).then((function(t){e.closeLoopTypeData=t.data||[]})).catch((function(){}))}},{key:"changeCloseLoopType",value:function(e,t){this.page=1,this.total=0,this.closeLoopTypeIndex=t,this.closeLoopItem=e,this.formatCode()}},{key:"beforeFormatCode",value:function(){this.page=1,this.total=0,this.formatCode()}},{key:"formatCode",value:function(){var e=this;this.displayQueryData=[];var t={id:this.closeLoopItem.id,lb:this.closeLoopItem.lb,mzzy:this.closeLoopItem.mzzy,begin:this.dateRangeVal[0],end:this.dateRangeVal[1],start:this.page-1,size:this.size,search:this.searchKey,type:this.showHistorytype?0:1};this.$api.formatCode(t).then((function(t){e.displayQueryData=t.data||[],e.displayQueryData.length&&(e.total=t.data[0].totalCount||0)})).catch((function(){}))}},{key:"codeList",value:function(e,t){var o=this,a={bhlbdm:this.closeLoopItem.id,mzzy:t.mzzy,yljgdm:e.yljgdm,cqlsbz:e.cqlsbz,syxh:e.syxh,yzxh:e.yzxh,hisxh:e.hisxh,time:e.time};this.$api.codeList(a).then((function(e){o.codeListTable=e.data||[],o.showCodeList=!0})).catch((function(){o.showCodeList=!1}))}},{key:"showIframe",value:function(e){var t,o=this,a="yljgdm=".concat(e.yljgdm,"&ysdm=").concat(this.userCode,"&ksdm=123&patid=10243&jzlsh=").concat(e.syxh,"&jzlb=").concat(this.closeLoopItem.mzzy,"&cqlsbz=").concat(e.cqlsbz,"&xh=").concat(e.yzxh);if((window.CONFIG.iframeUrl.indexOf("/bh/closeloop")>-1?2===this.closeLoopItem.mzzy:4===this.closeLoopItem.mzzy)&&0===this.closeLoopItem.lb?t=window.CONFIG.iframeUrl.indexOf("closedCycle")>0&&("BD1"===this.closeLoopItem.ywy||"BD2"===this.closeLoopItem.ywy||"BD4"===this.closeLoopItem.ywy)?"".concat(a,"&xh_type=cis_sqdxh&skip=3&sysId=bhTest&type=zy"):"".concat(a,"&xh_type=cis_yzxh&skip=3&sysId=bhTest&type=zy"):1===this.closeLoopItem.mzzy&&0===this.closeLoopItem.lb?t="".concat(a,"&xh_type=cis_cfmxxh&skip=3&sysId=bhTest&type=mz"):"BP2_101"===this.closeLoopItem.id||"BP1_101"===this.closeLoopItem.id?(t="".concat(a,"&xh_type=lsh&skip=3&sysId=bhTest&type=ipsg@").concat(this.closeLoopItem.id),console.log(t)):t="".concat(a,"&xh_type=lsh&skip=3&sysId=bhTest&type=fyz@").concat(this.closeLoopItem.id),this.showCloseloopHistoryFilter){var s="&showHistorytype="+(this.showHistorytype?"0":"1");t+=s}this.showCloseLoop=!0,this.$nextTick((function(){var e=o.$refs.closeLoopShow;e.contentWindow&&(e.contentWindow.location.href=window.CONFIG.iframeUrl+t,console.log(window.CONFIG.iframeUrl+t))}))}}]),o}(u["c"]);Object(p["a"])([h["a"]],b.prototype,"userCode",void 0),b=Object(p["a"])([Object(u["a"])({name:"DisplayQuery",components:{pagination:d["a"]}})],b);var g=b,v=g,w=(o("fe1c"),o("0b56")),C=Object(w["a"])(v,a,s,!1,null,"57f80e7e",null);t["default"]=C.exports},6407:function(e,t,o){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"pager-count":e.pagerCount},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},s=[],l=(o("7afe"),o("f13c")),n=o("ae5e"),i=o("acac"),c=o("2ad3"),r=o("e0e5"),p=o("fd63"),u=o("e4a1");function h(e){var t=d();return function(){var o,a=Object(r["a"])(e);if(t){var s=Object(r["a"])(this).constructor;o=Reflect.construct(a,arguments,s)}else o=a.apply(this,arguments);return Object(c["a"])(this,o)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(i["a"])(o,e);var t=h(o);function o(){return Object(l["a"])(this,o),t.apply(this,arguments)}return Object(n["a"])(o,[{key:"currentPage",get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},{key:"pageSize",get:function(){return this.size},set:function(e){this.$emit("update:size",e)}},{key:"handleSizeChange",value:function(e){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(e){this.$emit("getTableData")}}]),o}(u["c"]);Object(p["a"])([Object(u["b"])({required:!0})],f.prototype,"total",void 0),Object(p["a"])([Object(u["b"])({default:1})],f.prototype,"page",void 0),Object(p["a"])([Object(u["b"])({default:10})],f.prototype,"size",void 0),Object(p["a"])([Object(u["b"])({default:7})],f.prototype,"pagerCount",void 0),Object(p["a"])([Object(u["b"])({default:function(){return[10,20,30,50]}})],f.prototype,"pageSizes",void 0),Object(p["a"])([Object(u["b"])({default:"total, sizes, prev, pager, next, jumper"})],f.prototype,"layout",void 0),f=Object(p["a"])([Object(u["a"])({name:"pagination"})],f);var y=f,m=y,b=(o("84c7"),o("0b56")),g=Object(b["a"])(m,a,s,!1,null,"7e267c7f",null);t["a"]=g.exports},"84c7":function(e,t,o){"use strict";o("f180")},a349:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var a=o("3753"),s=o("7736"),l=n("computed",s["e"]);n("computed",s["c"]),n("methods",s["b"]),n("methods",s["d"]);function n(e,t){function o(o,s){return Object(a["a"])((function(a,l){a[e]||(a[e]={});var n,i=(n={},n[l]=o,n);a[e][l]=void 0!==s?t(s,i)[l]:t(i)[l]}))}function s(e,t){if("string"===typeof t){var a=t,s=e;return o(a,void 0)(s,a)}var l=i(t),n=e;return o(n,l)}return s}function i(e){var t=e&&e.namespace;if("string"===typeof t)return"/"!==t[t.length-1]?t+"/":t}},ab59:function(e,t,o){},f180:function(e,t,o){},fe1c:function(e,t,o){"use strict";o("ab59")}}]);