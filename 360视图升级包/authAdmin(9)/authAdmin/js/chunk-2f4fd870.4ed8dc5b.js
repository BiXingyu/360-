(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f4fd870"],{"08cd":function(t,e,s){"use strict";s.r(e);s("fc02"),s("a450");var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-container",{staticClass:"container"},[e("el-header",{staticClass:"header-container flex flex-pack-justify-between"},[e("div",{staticClass:"left flex flex-align-center"},[e("h3",{staticClass:"header"},[e("div",{staticClass:"logo",style:{width:t.indexLogoSizeInfo.width,height:t.indexLogoSizeInfo.height,marginTop:t.indexLogoSizeInfo.marginTop}},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"/authAdmin/imgs/logo.png",alt:""}})]),t.showSystemVersionInfo?e("span",[t._v(t._s(t.masterInstitution.name+" "+t.systemVersion))]):t._e()]),e("div",{staticClass:"system-container"},[t._l(t.hasPermissionMenuList,(function(s,o){return[s.menuList.length?e("span",{key:o,class:["my-btn",{active:s.code===t.activeProductId}],on:{click:function(e){return t.changeActivePro(s)}}},[t._v("\n            "+t._s(s.name)+"\n          ")]):t._e()]}))],2)]),e("div",{staticClass:"right flex flex-align-center"},["knowledgeManager"===t.$route.path.substring(1,17)||"baseConfig"===t.$route.path.substring(1,11)||"knowledgeNav"===t.$route.path.substring(1)?e("div",{staticClass:"hospital mr-10"},[e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v("\n            "+t._s(t.yljgmc)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.hospitalList,(function(s,o){return e("el-dropdown-item",{key:o,attrs:{command:s.code}},[t._v(t._s(s.name))])})),1)],1)],1):t._e(),e("div",{staticClass:"user"},[e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"user-img"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("span",{staticStyle:{margin:"5px"},on:{click:function(e){return t.edit()}}},[t._v("更改密码")])])],1)],1),t._v("\n        "+t._s(t.userFullName)+"\n      ")],1),e("div",{staticClass:"header-line"}),e("span",{staticClass:"exit-btn",on:{click:t.exit}})])]),e("el-container",{staticClass:"main-container"},[e("el-aside",{staticClass:"menu-container",attrs:{width:"220px"}},[e("el-menu",{staticClass:"menu",attrs:{"unique-opened":"",router:"","default-active":t.roleEditPath}},[t._l(t.menusArr,(function(s){return[s.children&&s.children.length?[e("el-submenu",{key:s.code,attrs:{index:s.path}},[e("template",{slot:"title"},[e("i",{class:"icon icon-"+s.path.substr(1)}),e("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(s.name))])]),t._l(s.children,(function(s){return[s.children.length<=0?[e("el-menu-item",{key:s.code,attrs:{index:s.path}},[t._v("\n                    "+t._s(s.name)+"\n                  ")])]:[e("el-submenu",{key:s.code,attrs:{index:s.path}},[e("template",{slot:"title"},[e("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("\n                        "+t._s(s.name)+"\n                      ")])]),t._l(s.children,(function(s){return e("el-menu-item",{key:s.code,attrs:{index:s.path}},[t._v("\n                      "+t._s(s.name)+"\n                    ")])}))],2)]]}))],2)]:[e("el-menu-item",{key:s.code,attrs:{index:s.path}},[e("i",{class:"icon icon-"+s.path.split("/")[2]}),e("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(s.name))])])]]}))],2)],1),e("el-main",{staticClass:"content-container"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)],1),e("el-dialog",{attrs:{title:"更改密码",visible:t.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showDialog=e}}},[e("el-form",{ref:"passwordForm",attrs:{"label-width":"350px",model:t.passwordForm,rules:t.passwordFormRules}},[e("el-form-item",{attrs:{label:"原始密码",prop:"oldPassword"}},[e("el-input",{staticClass:"input",attrs:{type:t.type},model:{value:t.passwordForm.oldPassword,callback:function(e){t.$set(t.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}}),e("i",{staticClass:"unlookPassword",on:{click:function(e){return t.lookPassword()}}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[e("el-input",{staticClass:"input",attrs:{type:"password"},model:{value:t.passwordForm.newPassword,callback:function(e){t.$set(t.passwordForm,"newPassword",e)},expression:"passwordForm.newPassword"}})],1),e("el-form-item",{attrs:{label:"重复新密码",prop:"confirmPassword"}},[e("el-input",{staticClass:"input",attrs:{type:"password"},model:{value:t.passwordForm.confirmPassword,callback:function(e){t.$set(t.passwordForm,"confirmPassword",e)},expression:"passwordForm.confirmPassword"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(e){t.showDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.updatePassword()}}},[t._v("提交")])],1)],1)],1)},a=[],n=(s("7afe"),s("a7e5"),s("1bc7"),s("e5b4"),s("f13c")),r=s("ae5e"),i=s("acac"),c=s("2ad3"),l=s("e0e5"),d=s("fd63"),u=s("7c09"),p=s("e4a1"),m=s("a349"),f=s("2da9"),h=s("efb9");function w(t){var e=v();return function(){var s,o=Object(l["a"])(t);if(e){var a=Object(l["a"])(this).constructor;s=Reflect.construct(o,arguments,a)}else s=o.apply(this,arguments);return Object(c["a"])(this,s)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var g=function(t){Object(i["a"])(s,t);var e=w(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.indexLogoSizeInfo={width:"0px",height:"0px"},t.showSystemVersionInfo=!1,t.showDialog=!1,t.type="password",t.path="",t.passwordForm={oldPassword:"",newPassword:"",confirmPassword:""},t.passwordFormRules={oldPassword:[{validator:t.validIsLike,trigger:"blur"}],newPassword:[{required:!0,validator:t.validFormat,trigger:"blur"}],confirmPassword:[{validator:t.validCompare,trigger:"blur"}]},t}return Object(r["a"])(s,[{key:"mounted",value:function(){this.showSystemVersionInfo=window.CONFIG.showSystemVersionInfo,this.indexLogoSizeInfo=window.CONFIG.indexLogoSizeInfo}},{key:"validIsLike",value:function(t,e){var s=this;return new Promise((function(t,o){if(""===e)o("请输入原密码");else{var a={};a=sessionStorage.getItem("isLoginAes")?{usercode:h["a"].encrypt(s.account),password:h["a"].encrypt(e),yljgdm:h["a"].encrypt(s.configYljgdm)}:{usercode:f["Base64"].encode(s.account),yljgdm:f["Base64"].encode(s.configYljgdm),password:f["Base64"].encode(e)},s.$api.findPassword(a).then((function(t){t.data?o():o("与原始密码不一致")})).catch((function(t){}))}}))}},{key:"validFormat",value:function(t,e,s){return new Promise((function(t,o){""===e?s(new Error("请输入密码")):/(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\W_!@#$%&*~()-+=]+$)(?![0-9\\W_!@#$%^&*()-+=]+$)[a-zA-Z0-9\W_!@#$%^&*`()-+=]{8,12}$/.test(e)?s():s(new Error("必须包含8-12位大小字母、数字、符号至少3种"))}))}},{key:"validCompare",value:function(t,e,s){var o=this;return new Promise((function(t,a){""===e?s(new Error("请确认新密码")):e!==o.passwordForm.newPassword?s(new Error("两次输入密码不一致")):s()}))}},{key:"yljgmc",get:function(){var t=this;return this.hospitalList.find((function(e){return e.code===t.configYljgdm})).name||""}},{key:"menusArr",get:function(){var t=this,e=this.hasPermissionMenuList.find((function(e){return e.code===t.activeProductId})).menuList;return e.forEach((function(t){if("05"===t.code&&t.children.length){var e=t.children.findIndex((function(t){return"数据源维护"===t.name}));window.CONFIG.iframeUrl.indexOf("/bh/closeloop")>-1&&e>-1&&t.children.splice(e,1)}if(!t.path&&t.children.length){var s=t.children[0].path,o=s.split("/");t.path="/".concat(o[1])}})),e}},{key:"roleEditPath",get:function(){var t=this.$route.matched[1].path;return"/authority/roleEdit"===t?"/authority/role":"/vteBasicTable/vteGroup"===t||"/vteBasicTable/vteClausesMapNorms"===t||"/vteBasicTable/vteAccessStand"===t?"/vteBasicTable/vteCatalog":"/vteBasicTable/vteNormsRules"===t||"/vteBasicTable/ruleCompteUnit"===t?"/vteBasicTable/vteCausesRules":t}},{key:"lookPassword",value:function(){var t=document.getElementsByClassName("unlookPassword");t.length>0?(t[0].className="lookPassword",this.type="text"):(t=document.getElementsByClassName("lookPassword"),t[0].className="unlookPassword",this.type="password")}},{key:"edit",value:function(){var t=this;this.passwordForm={oldPassword:"",newPassword:"",confirmPassword:""},this.showDialog=!0,this.$nextTick((function(){t.$refs.passwordForm.clearValidate()}))}},{key:"updatePassword",value:function(){var t=this;this.$refs.passwordForm.validate((function(e){if(e)if(t.passwordForm.confirmPassword===t.passwordForm.oldPassword)t.$message.warning("密码与原始密码一致");else{var s={};s=sessionStorage.getItem("isLoginAes")?{usercode:h["a"].encrypt(t.account),password:h["a"].encrypt(t.passwordForm.confirmPassword),jgdm:h["a"].encrypt(t.configYljgdm)}:{usercode:f["Base64"].encode(t.account),jgdm:f["Base64"].encode(t.configYljgdm),password:f["Base64"].encode(t.passwordForm.confirmPassword)},t.$api.updatePassword(s).then((function(e){t.showDialog=!1,200===e.status?t.$message.success("密码修改成功"):t.$message.error("密码修改失败")})).catch((function(t){}))}}))}},{key:"handleCommand",value:function(t){this.$store.commit("SET_CONFIG_HOSPITAL_ID",t)}},{key:"exit",value:function(){this.$api.quit().then((function(t){})).catch((function(t){})),sessionStorage.removeItem("isLoginAes"),this.$router.push("/login")}},{key:"changeActivePro",value:function(t){var e=this,s=t.name,o=t.code,a=t.version;this.$store.commit("SET_SYSTEM_VERSION",a),this.activeProductId!==o&&(this.$store.commit("SET_ACTIVE_PRO_ID",o),u["a"].setGlobalState({activeProductId:o}),this.$nextTick((function(){s.toLocaleLowerCase().indexOf("vte")>-1?e.$router.push("/micro-app/"):e.menusArr[0].children.length?e.$router.push(e.menusArr[0].children[0].path):e.$router.push(e.menusArr[0].path)})))}}]),s}(p["c"]);Object(d["a"])([m["a"]],g.prototype,"account",void 0),Object(d["a"])([m["a"]],g.prototype,"userFullName",void 0),Object(d["a"])([m["a"]],g.prototype,"productList",void 0),Object(d["a"])([m["a"]],g.prototype,"activeProductId",void 0),Object(d["a"])([m["a"]],g.prototype,"hasPermissionMenuList",void 0),Object(d["a"])([m["a"]],g.prototype,"masterInstitution",void 0),Object(d["a"])([m["a"]],g.prototype,"systemVersion",void 0),Object(d["a"])([m["a"]],g.prototype,"hospitalList",void 0),Object(d["a"])([m["a"]],g.prototype,"configYljgdm",void 0),g=Object(d["a"])([Object(p["a"])({name:"layout"})],g);var y=g,b=y,P=(s("0e4f"),s("0b56")),k=Object(P["a"])(b,o,a,!1,null,"488fa36e",null);e["default"]=k.exports},"0a82":function(t,e,s){},"0e4f":function(t,e,s){"use strict";s("0a82")},"7c09":function(t,e,s){"use strict";var o=s("e1cf"),a={},n=Object(o["b"])(a);n.onGlobalStateChange((function(t,e){console.log("===state",t),console.log("===prev",e)})),e["a"]=n},a349:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var o=s("3753"),a=s("7736"),n=r("computed",a["e"]);r("computed",a["c"]),r("methods",a["b"]),r("methods",a["d"]);function r(t,e){function s(s,a){return Object(o["a"])((function(o,n){o[t]||(o[t]={});var r,i=(r={},r[n]=s,r);o[t][n]=void 0!==a?e(a,i)[n]:e(i)[n]}))}function a(t,e){if("string"===typeof e){var o=e,a=t;return s(o,void 0)(a,o)}var n=i(e),r=t;return s(r,n)}return a}function i(t){var e=t&&t.namespace;if("string"===typeof e)return"/"!==e[e.length-1]?e+"/":e}}}]);