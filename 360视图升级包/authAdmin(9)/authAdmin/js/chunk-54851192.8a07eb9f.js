(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54851192"],{1859:function(e,t,a){},"3a63":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"evaluationAuthority"},[t("div",{staticClass:"toolbar"},[t("el-input",{staticClass:"w-200",attrs:{placeholder:"请输入量表名称",clearable:""},on:{clear:e.quertEvaluationData},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.quertEvaluationData.apply(null,arguments)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.quertEvaluationData}},[e._v("查询")]),t("el-button",{staticClass:"header-bt",attrs:{type:"primary"},on:{click:e.showDialog}},[e._v("新增\n    ")])],1),t("div",{staticClass:"content-main flex-1"},[t("el-table",{staticClass:"dictionary-table",attrs:{data:e.evaluationAccessData}},[t("el-table-column",{attrs:{prop:"roleName",label:"角色",width:"100%"}}),t("el-table-column",{attrs:{prop:"evaluationType",label:"评估类型",width:"200%"}}),t("el-table-column",{attrs:{prop:"lbiaomc",label:"量表名称",width:"400%"}}),t("el-table-column",{attrs:{prop:"pgyyName",label:"评估时机"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")])]}}])})],1),t("pagination",{attrs:{page:e.page,size:e.size,total:e.total},on:{"update:page":function(t){e.page=t},"update:size":function(t){e.size=t},getTableData:e.quertEvaluationData}})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dicDialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dicDialogVisible=t}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.formRules,"label-width":"120px"}},[e.isAddDialog?t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"角色选择",prop:"roletype"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{plceholder:"请选择"},model:{value:e.editForm.roletype,callback:function(t){e.$set(e.editForm,"roletype",t)},expression:"editForm.roletype"}},e._l(e.roleTypeOptions,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleName}})})),1)],1):e._e(),"护士"===e.editForm.roletype?t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"评估类型",prop:"evaluationType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{plceholder:"请选择"},model:{value:e.editForm.evaluationType,callback:function(t){e.$set(e.editForm,"evaluationType",t)},expression:"editForm.evaluationType"}},e._l(e.evaluationTypeOptions,(function(e){return t("el-option",{key:e.evaluationType,attrs:{label:e.evaluationName,value:e.evaluationName}})})),1)],1):e._e(),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"量表类型",prop:"lbiaotype"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.editForm.lbiaotype,callback:function(t){e.$set(e.editForm,"lbiaotype",t)},expression:"editForm.lbiaotype"}},e._l(e.lbiaoTypeList,(function(e){return t("el-option",{key:e.lbiaodm,attrs:{label:e.lbiaomc,value:e.lbiaodm}})})),1)],1),"自动触发"===e.editForm.evaluationType||"医生"===e.editForm.roletype?t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"评估时机",prop:"pgyyName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",placeholder:"可多选"},on:{change:e.changeSelect},model:{value:e.selectedArray,callback:function(t){e.selectedArray=t},expression:"selectedArray"}},[t("el-checkbox",{on:{change:function(t){return e.selectAll()}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("全选")]),e._l(e.pgyyList,(function(e){return t("el-option",{key:e.dictValueCode,attrs:{label:e.dictValueName,value:e.dictValueCode}})}))],2)],1):e._e(),t("el-form-item",{staticStyle:{width:"80px"},attrs:{label:"启用"}},[t("el-switch",{attrs:{"on-text":"ON","off-text":"OFF"},model:{value:e.editForm.enable,callback:function(t){e.$set(e.editForm,"enable",t)},expression:"editForm.enable"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dicDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addEvaluationData}},[e._v("提 交")])],1)],1)],1)},l=[],o=(a("7afe"),a("1bc7"),a("fc02"),a("f13c")),n=a("ae5e"),r=a("acac"),c=a("2ad3"),s=a("e0e5"),u=a("fd63"),p=a("e4a1"),d=a("6407");function y(e){var t=f();return function(){var a,i=Object(s["a"])(e);if(t){var l=Object(s["a"])(this).constructor;a=Reflect.construct(i,arguments,l)}else a=i.apply(this,arguments);return Object(c["a"])(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){Object(r["a"])(a,e);var t=y(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.searchKey="",e.page=1,e.size=10,e.total=0,e.evaluationAccessData=[],e.pgyyList=[],e.dicDialogVisible=!1,e.dialogTitle="编辑",e.lbiaoTypeList=[],e.checked=!1,e.selectedArray=[],e.editForm={pgyyName:[],id:"",evaluationType:"",roletype:"",lbiaotype:"",enable:!0},e.roleTypeOptions=[{roleId:"1",roleName:"医生"},{roleId:"2",roleName:"护士"}],e.evaluationTypeOptions=[{evaluationType:"Auto",evaluationName:"自动触发"},{evaluationType:"",evaluationName:"手动新增"}],e.formRules={roletype:[{required:!0,message:"请选择角色类型",trigger:"blur"}],lbiaotype:[{required:!0,message:"请选择量表类型",trigger:"blur"}],evaluationType:[{required:!0,message:"请选择评估类型",trigger:"blur"}]},e.isAddDialog=!1,e}return Object(n["a"])(a,[{key:"mounted",value:function(){this.getPgyy(),this.quertEvaluationData(),this.listLbiaoType()}},{key:"formatterStatus",value:function(e){return 0===e.status?"启用":"停用"}},{key:"showDialog",value:function(){var e=this;this.isAddDialog=!0,this.dicDialogVisible=!0,this.$nextTick((function(){e.$refs.editForm.resetFields(),e.editForm.id="",e.editForm.evaluationType="",e.editForm.lbiaotype="",e.editForm.roletype="",e.selectedArray=[],e.editForm.enable=!0})),this.dialogTitle="新增"}},{key:"handleEdit",value:function(e){this.editForm.id=e.id,this.editForm.roletype=e.roleName,this.editForm.evaluationType=e.evaluationType,this.editForm.lbiaotype=e.lbiaodm,this.editForm.pgyyName=e.pgyyCode.split(","),this.editForm.enable=0===e.jlzt,this.dicDialogVisible=!0}},{key:"quertEvaluationData",value:function(){this.page=1,this.quertEvaluationDataList()}},{key:"quertEvaluationDataList",value:function(){var e=this,t={searchKey:this.searchKey,page:this.page,size:this.size};this.$api.evaluationAccessData(t).then((function(t){e.evaluationAccessData=t.data||[],e.evaluationAccessData.length>0?e.total=e.evaluationAccessData[0].total:e.total=0})).catch((function(){}))}},{key:"getPgyy",value:function(){var e=this;this.$api.getPgyy().then((function(t){var a=t.data||[];a.forEach((function(t){e.pgyyList.push({dictValueCode:t.dictValueCode,dictValueName:t.dictValueName})}))})).catch((function(){}))}},{key:"addEvaluationData",value:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){var a={id:e.editForm.id,roleId:"医生"===e.editForm.roletype?"1":"2",roleNmae:e.editForm.roletype,evaluationType:e.editForm.evaluationType,lbiaodm:e.editForm.lbiaotype,pgyyCode:e.selectedArray.join(","),status:e.editForm.enable?0:1};e.$api.addEvaluationData(a).then((function(t){200===t.status?e.$message({message:"保存成功",type:"success"}):400===t.status?e.$message({message:"相同量表添加重复，保存失败！",type:"error"}):401===t.status&&e.$message({message:"不同角色添加相同的量表，保存错误!",type:"error"}),e.dicDialogVisible=!1,e.quertEvaluationData()})).catch((function(){}))}}))}},{key:"listLbiaoType",value:function(){var e=this;this.$api.listLbiaoType().then((function(t){var a=t.data||[];a.forEach((function(t){e.lbiaoTypeList.push({lbiaodm:t.lbiaodm,lbiaomc:t.lbiaomc})}))})).catch((function(){}))}},{key:"selectAll",value:function(){var e=this;this.selectedArray=[],this.checked?this.pgyyList.map((function(t){e.selectedArray.push(t.dictValueCode)})):this.selectedArray=[]}},{key:"changeSelect",value:function(e){e.length===this.pgyyList.length?this.checked=!0:this.checked=!1}}]),a}(p["c"]);h=Object(u["a"])([Object(p["a"])({name:"evaluationAuthority",components:{pagination:d["a"]}})],h);var b=h,m=b,v=(a("bc3b"),a("0b56")),g=Object(v["a"])(m,i,l,!1,null,"f1bdd6ae",null);t["default"]=g.exports},6407:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"pager-count":e.pagerCount},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},l=[],o=(a("7afe"),a("f13c")),n=a("ae5e"),r=a("acac"),c=a("2ad3"),s=a("e0e5"),u=a("fd63"),p=a("e4a1");function d(e){var t=y();return function(){var a,i=Object(s["a"])(e);if(t){var l=Object(s["a"])(this).constructor;a=Reflect.construct(i,arguments,l)}else a=i.apply(this,arguments);return Object(c["a"])(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(r["a"])(a,e);var t=d(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(n["a"])(a,[{key:"currentPage",get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},{key:"pageSize",get:function(){return this.size},set:function(e){this.$emit("update:size",e)}},{key:"handleSizeChange",value:function(e){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(e){this.$emit("getTableData")}}]),a}(p["c"]);Object(u["a"])([Object(p["b"])({required:!0})],f.prototype,"total",void 0),Object(u["a"])([Object(p["b"])({default:1})],f.prototype,"page",void 0),Object(u["a"])([Object(p["b"])({default:10})],f.prototype,"size",void 0),Object(u["a"])([Object(p["b"])({default:7})],f.prototype,"pagerCount",void 0),Object(u["a"])([Object(p["b"])({default:function(){return[10,20,30,50]}})],f.prototype,"pageSizes",void 0),Object(u["a"])([Object(p["b"])({default:"total, sizes, prev, pager, next, jumper"})],f.prototype,"layout",void 0),f=Object(u["a"])([Object(p["a"])({name:"pagination"})],f);var h=f,b=h,m=(a("84c7"),a("0b56")),v=Object(m["a"])(b,i,l,!1,null,"7e267c7f",null);t["a"]=v.exports},"84c7":function(e,t,a){"use strict";a("f180")},bc3b:function(e,t,a){"use strict";a("1859")},f180:function(e,t,a){}}]);