(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81eb9dba"],{5697:function(e,t,i){},"63fc":function(e,t,i){"use strict";i("5697")},6407:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"pager-count":e.pagerCount},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},a=[],l=(i("7afe"),i("f13c")),o=i("ae5e"),s=i("acac"),c=i("2ad3"),r=i("e0e5"),u=i("fd63"),d=i("e4a1");function f(e){var t=p();return function(){var i,n=Object(r["a"])(e);if(t){var a=Object(r["a"])(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Object(c["a"])(this,i)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){Object(s["a"])(i,e);var t=f(i);function i(){return Object(l["a"])(this,i),t.apply(this,arguments)}return Object(o["a"])(i,[{key:"currentPage",get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},{key:"pageSize",get:function(){return this.size},set:function(e){this.$emit("update:size",e)}},{key:"handleSizeChange",value:function(e){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(e){this.$emit("getTableData")}}]),i}(d["c"]);Object(u["a"])([Object(d["b"])({required:!0})],h.prototype,"total",void 0),Object(u["a"])([Object(d["b"])({default:1})],h.prototype,"page",void 0),Object(u["a"])([Object(d["b"])({default:10})],h.prototype,"size",void 0),Object(u["a"])([Object(d["b"])({default:7})],h.prototype,"pagerCount",void 0),Object(u["a"])([Object(d["b"])({default:function(){return[10,20,30,50]}})],h.prototype,"pageSizes",void 0),Object(u["a"])([Object(d["b"])({default:"total, sizes, prev, pager, next, jumper"})],h.prototype,"layout",void 0),h=Object(u["a"])([Object(d["a"])({name:"pagination"})],h);var m=h,b=m,g=(i("84c7"),i("0b56")),y=Object(g["a"])(b,n,a,!1,null,"7e267c7f",null);t["a"]=y.exports},7121:function(e,t,i){"use strict";i.r(t);i("a450");var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-auth flex"},[t("div",{staticClass:"client-container"},[t("div",{staticClass:"search flex flex-pack-justify-between flex-align-center"},[t("span",[t("el-input",{staticClass:"keyword",attrs:{placeholder:"请输入名称",clearable:!0},on:{clear:e.listClients},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.listClients.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:e.listClient}},[e._v("\n          查询\n        ")])],1),t("el-button",{staticClass:"my-btn",attrs:{type:"primary"},on:{click:e.handleAddBtnClick}},[e._v("\n        新增\n      ")])],1),t("div",{staticClass:"content-main flex-1 mt-10"},[t("el-table",{ref:"clientTable",staticClass:"custom-table",attrs:{data:e.clientList,"highlight-current-row":"","header-row-class-name":"table-header"}},[t("el-table-column",{attrs:{type:"index","min-width":"100"}}),t("el-table-column",{attrs:{prop:"code",label:"客户端编码","min-width":"120"}}),t("el-table-column",{attrs:{prop:"name",label:"客户端名称","min-width":"120"}}),t("el-table-column",{attrs:{prop:"authenticationCode",label:"授权码","min-width":"300"}}),t("el-table-column",{attrs:{prop:"yljgdm",label:"医疗机构代码","min-width":"150",align:"center"}}),t("el-table-column",{attrs:{prop:"limitNumber",label:"访问限制次数","min-width":"100",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"授权时间","min-width":"200",align:"center"}}),t("el-table-column",{attrs:{prop:"status",label:"启用",formatter:e.formatStatus,"min-width":"80",align:"center"}}),t("el-table-column",{attrs:{label:"操作","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditBtnClick(i.row)}}},[e._v("\n              编辑\n            ")])]}}])})],1),t("pagination",{staticClass:"page-select",attrs:{page:e.page,size:e.size,total:e.total},on:{"update:page":function(t){e.page=t},"update:size":function(t){e.size=t},getTableData:e.listClients}}),t("el-dialog",{attrs:{title:"add"===this.operationType?"新增授权":"编辑授权",visible:e.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{ref:"clientForm",attrs:{model:e.clientForm,"label-width":"110px",rules:e.clientFormRules}},[t("el-form-item",{attrs:{label:"客户端编码",prop:"code"}},[t("el-input",{attrs:{maxlength:50},model:{value:e.clientForm.code,callback:function(t){e.$set(e.clientForm,"code",t)},expression:"clientForm.code"}})],1),t("el-form-item",{attrs:{label:"客户端名称",prop:"name"}},[t("el-input",{model:{value:e.clientForm.name,callback:function(t){e.$set(e.clientForm,"name",t)},expression:"clientForm.name"}})],1),t("el-form-item",{attrs:{label:"授权码",prop:"authCode"}},[t("el-input",{model:{value:e.clientForm.authCode,callback:function(t){e.$set(e.clientForm,"authCode",t)},expression:"clientForm.authCode"}})],1),t("el-form-item",{attrs:{label:"访问限制次数",prop:"limitNumber"}},[t("el-input",{model:{value:e.clientForm.limitNumber,callback:function(t){e.$set(e.clientForm,"limitNumber",t)},expression:"clientForm.limitNumber"}})],1),t("el-form-item",{attrs:{label:"医疗机构代码",prop:"yljgdm"}},[t("el-select",{staticClass:"size-full",attrs:{placeholder:"请选择"},model:{value:e.clientForm.yljgdm,callback:function(t){e.$set(e.clientForm,"yljgdm",t)},expression:"clientForm.yljgdm"}},e._l(e.hospitalList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.code,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:"启用"}},[t("el-switch",{attrs:{"on-text":"是","off-text":"否"},model:{value:e.clientForm.status,callback:function(t){e.$set(e.clientForm,"status",t)},expression:"clientForm.status"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){return e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitClientForm.apply(null,arguments)}}},[e._v("\n            提交\n          ")])],1)],1)],1)])])},a=[],l=(i("7afe"),i("1bc7"),i("f13c")),o=i("ae5e"),s=i("acac"),c=i("2ad3"),r=i("e0e5"),u=i("fd63"),d=i("e4a1"),f=i("6407");function p(e){var t=h();return function(){var i,n=Object(r["a"])(e);if(t){var a=Object(r["a"])(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Object(c["a"])(this,i)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(s["a"])(i,e);var t=p(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.activeClientId=0,e.activeTab="1",e.currentClient={},e.clientList=[],e.roleTypeList=[],e.ruleList=[{rule:"$3*$3",name:"显示前三位和后三位"},{rule:"$*",name:"只显示第一位"},{rule:"*",name:"隐藏所有"}],e.keyword="",e.subSensKeyword="",e.sensWordList=[],e.subSensList=[],e.showDialog=!1,e.showInfoProtectDialog=!1,e.tabPage=1,e.tabSize=10,e.tabTotal=0,e.operationType="add",e.page=1,e.size=10,e.total=0,e.showHiddenMedicalRecordKeywords=!1,e.num=1,e.hospitalList=[],e.clientForm={id:"0",code:"",name:"",authCode:"",yljgdm:[],status:!0,limitNumber:""},e.clientFormRules={code:[{validator:e.validExistName,trigger:"blur"}],yljgdm:[{required:!0,message:"请选择角色类型",trigger:"change"}]},e}return Object(o["a"])(i,[{key:"mounted",value:function(){this.listClients(),this.optionYljgdm()}},{key:"closeDialog",value:function(){this.showDialog=!1}},{key:"closeInfoProtectDialog",value:function(){this.showInfoProtectDialog=!1}},{key:"formatStatus",value:function(e,t){return e.status?"是":"否"}},{key:"formatSensWordRule",value:function(e,t){for(var i="",n=0;n<this.ruleList.length;n++)if(e.sensWordRule===this.ruleList[n].rule){i=this.ruleList[n].name;break}return i}},{key:"getPagedClientSubSenses",value:function(){var e=this,t={roleId:this.activeClientId,keyword:this.subSensKeyword,type:5,page:this.tabPage,size:this.tabSize};this.$api.getPagedClientSubSenses(t).then((function(t){var i=t.data||{};e.subSensList=i.content||[],e.tabTotal=i.totalElements||0})).catch((function(e){}))}},{key:"handleAddBtnClick",value:function(){var e=this;this.operationType="add",this.clientForm={id:"0",code:"",name:"",authCode:"",yljgdm:[],limitNumber:"",status:!0},this.showDialog=!0,this.$nextTick((function(){e.$refs.clientForm.clearValidate()}))}},{key:"handleEditBtnClick",value:function(e){var t=this;this.operationType="edit",this.clientForm={id:e.id,code:e.code,name:e.name,authCode:e.authenticationCode,yljgdm:e.yljgdm,limitNumber:e.limitNumber,status:e.status},this.showDialog=!0,this.$nextTick((function(){t.$refs.clientForm.clearValidate()}))}},{key:"handleProtectBtnClick",value:function(e){this.activeClientId=e.id,this.activeTab="1",this.listSensWords(),this.showInfoProtectDialog=!0}},{key:"handleTabClick",value:function(e){"5"===e.name?(this.tabPage=1,this.getPagedClientSubSenses(),this.activeTab="5",this.listSensWords()):"1"===e.name&&(this.activeTab="1",this.listSensWords())}},{key:"listAllClientTypes",value:function(){var e=this;this.$api.listAllClientTypes().then((function(t){e.roleTypeList=t.data||[]})).catch((function(e){}))}},{key:"listClient",value:function(){this.page=1,this.listClients()}},{key:"listClients",value:function(){var e=this;this.$api.listClients({keyword:this.keyword,page:this.page,size:this.size}).then((function(t){var i=t.data||{};e.clientList=i.content||[],e.total=i.totalElements||0})).catch((function(e){}))}},{key:"optionYljgdm",value:function(){var e=this;this.$api.selectHospital().then((function(t){e.hospitalList=t.data||[]})).catch((function(e){}))}},{key:"listSensWords",value:function(){var e=this;this.$api.listSensWordDtosByClientId({roleId:this.activeClientId}).then((function(t){e.sensWordList=t.data||[]})).catch((function(e){}))}},{key:"saveSensInfo",value:function(){var e=this;if("1"===this.activeTab){var t=[];this.sensWordList.forEach((function(i){t.push({id:i.id,roleId:e.activeClientId,sensId:i.sensWordId,enable:i.enable})})),this.$api.saveClientSensWords({roleSensWordListJson:JSON.stringify(t)}).then((function(t){e.showInfoProtectDialog=!1,e.$message({message:"授权、隐私规则配置成功！",type:"success"})})).catch((function(e){}))}else if("5"===this.activeTab){var i=[];this.subSensList.forEach((function(t){i.push({id:t.id,roleId:e.activeClientId,subCode:t.code,masterCode:t.bglbdm,type:5,bblx:t.bblx,enable:t.enable})})),this.$api.saveClientSubSensList({roleId:this.activeClientId,roleSubSensListJson:JSON.stringify(i)}).then((function(t){e.showInfoProtectDialog=!1,e.$message({message:"授权、检验项目配置成功！",type:"success"})})).catch((function(e){}))}}},{key:"submitClientForm",value:function(e){var t=this;this.$refs.clientForm.validate((function(e){if(e){var i="add"===t.operationType?"授权成功！":"授权修改成功！";"add"===t.operationType?t.$api.addClient(t.clientForm).then((function(e){t.showDialog=!1,t.$message({message:i,type:"success"}),t.listClients()})).catch((function(e){})):t.$api.updateClient(t.clientForm).then((function(e){t.showDialog=!1,t.$message({message:i,type:"success"}),t.listClients()})).catch((function(e){}))}}))}},{key:"validExistName",value:function(e,t){var i=this;return new Promise((function(e,n){""===t&&n("授权编码不能为空！"),i.$api.existClient({code:i.clientForm.code,id:i.clientForm.id}).then((function(t){return!0===t.data?n("授权编码已存在！"):e()})).catch((function(e){}))}))}},{key:"initShowHiddenMedicalRecordKeywords",value:function(){var e=this;this.$api.getSystemConfig({keyCode:"hide_some_medical_record_switch"}).then((function(t){var i=!1;if(t.data){var n=t.data;i=n.enable&&"1"===n.keyValue}e.showHiddenMedicalRecordKeywords=i})).catch((function(e){}))}},{key:"saveClientModules",value:function(){this.$message({message:"保存成功！",type:"success"})}}]),i}(d["c"]);m=Object(u["a"])([Object(d["a"])({name:"Client",components:{pagination:f["a"]}})],m);var b=m,g=b,y=(i("63fc"),i("0b56")),v=Object(y["a"])(g,n,a,!1,null,"06e53522",null);t["default"]=v.exports},"84c7":function(e,t,i){"use strict";i("f180")},f180:function(e,t,i){}}]);