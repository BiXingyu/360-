(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b70a1de"],{6407:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total,"pager-count":t.pagerCount},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})},s=[],n=(a("7afe"),a("f13c")),l=a("ae5e"),o=a("acac"),c=a("2ad3"),r=a("e0e5"),u=a("fd63"),p=a("e4a1");function g(t){var e=d();return function(){var a,i=Object(r["a"])(t);if(e){var s=Object(r["a"])(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return Object(c["a"])(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var f=function(t){Object(o["a"])(a,t);var e=g(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"currentPage",get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},{key:"pageSize",get:function(){return this.size},set:function(t){this.$emit("update:size",t)}},{key:"handleSizeChange",value:function(t){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(t){this.$emit("getTableData")}}]),a}(p["c"]);Object(u["a"])([Object(p["b"])({required:!0})],f.prototype,"total",void 0),Object(u["a"])([Object(p["b"])({default:1})],f.prototype,"page",void 0),Object(u["a"])([Object(p["b"])({default:10})],f.prototype,"size",void 0),Object(u["a"])([Object(p["b"])({default:7})],f.prototype,"pagerCount",void 0),Object(u["a"])([Object(p["b"])({default:function(){return[10,20,30,50]}})],f.prototype,"pageSizes",void 0),Object(u["a"])([Object(p["b"])({default:"total, sizes, prev, pager, next, jumper"})],f.prototype,"layout",void 0),f=Object(u["a"])([Object(p["a"])({name:"pagination"})],f);var h=f,m=h,y=(a("84c7"),a("0b56")),v=Object(y["a"])(m,i,s,!1,null,"7e267c7f",null);e["a"]=v.exports},"74d7":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"specialList mr-10"},[e("div",{staticClass:"menu"},[e("el-menu",{staticClass:"special-menu",attrs:{"default-openeds":t.opens,"default-active":t.defaultActive},on:{select:t.changeView}},t._l(t.dataList,(function(a,i){return e("el-submenu",{key:i,attrs:{index:i+""}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(a.specialtyName))]),e("el-menu-item-group",t._l(a.specialtyDiseaseConfigList,(function(a,s){return e("el-menu-item",{key:s,attrs:{index:i+"-"+s}},[t._v("\n            "+t._s(a.diseaseName)+"\n          ")])})),1)],1)})),1)],1)])},s=[],n=(a("7afe"),a("fc02"),a("a450"),a("1bc7"),a("f13c")),l=a("ae5e"),o=a("acac"),c=a("2ad3"),r=a("e0e5"),u=a("fd63"),p=a("e4a1"),g=a("a349");function d(t){var e=f();return function(){var a,i=Object(r["a"])(t);if(e){var s=Object(r["a"])(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return Object(c["a"])(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var h=function(t){Object(o["a"])(a,t);var e=d(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.dataList=[],t.opens=[],t.activeView={},t.yljgList=[],t.activeYljg="",t.defaultActive="0-0",t}return Object(l["a"])(a,[{key:"mounted",value:function(){"knowledgeManager"===this.$route.path.substring(1,17)||"baseConfig"===this.$route.path.substring(1,11)?this.getSpecialtyDiseaseIn():this.getSpecialtyDisease()}},{key:"getSpecialtyDisease",value:function(){var t=this;this.$api.getSpecialtyDisease().then((function(e){var a=e.data||[];t.queryCode&&""!==t.queryCode&&a.forEach((function(e,a){e.specialtyDiseaseConfigList.forEach((function(e,i){e.diseaseCode===t.queryCode&&(t.defaultActive=a+"-"+i)}))})),t.dataList=a,t.getdataList()})).catch((function(t){}))}},{key:"getSpecialtyDiseaseIn",value:function(){var t=this;this.$api.getSpecialtyDiseaseIn({yljgdm:this.configYljgdm}).then((function(e){var a=e.data||[];t.queryCode&&""!==t.queryCode&&a.forEach((function(e,a){e.specialtyDiseaseConfigList.forEach((function(e,i){e.diseaseCode===t.queryCode&&(t.defaultActive=a+"-"+i)}))})),t.dataList=a,t.getdataList()})).catch((function(t){}))}},{key:"listAllInstitutions",value:function(){var t=this;this.$api.listAllInstitutions().then((function(e){var a=e.data||[];t.yljgList=a.map((function(t){return{code:t.code,name:t.name}})),t.yljgList.length&&(t.activeYljg=t.yljgList[0].code,t.$emit("getYljg",t.activeYljg))})).catch((function(t){}))}},{key:"getdataList",value:function(){this.opens=[];for(var t=0;t<this.dataList.length;t++)this.opens.push(t+"");var e=this.defaultActive.split("-"),a=parseInt(e[0]),i=parseInt(e[1]);this.activeView=this.dataList[a].specialtyDiseaseConfigList[i],this.$emit("func",this.activeView)}},{key:"changeView",value:function(t){var e=t.split("-"),a=parseInt(e[0]),i=parseInt(e[1]);this.activeView=this.dataList[a].specialtyDiseaseConfigList[i],this.$emit("func",this.activeView)}}]),a}(p["c"]);Object(u["a"])([g["a"]],h.prototype,"configYljgdm",void 0),Object(u["a"])([Object(p["b"])(String)],h.prototype,"queryCode",void 0),h=Object(u["a"])([Object(p["a"])({name:"specialList"})],h);var m=h,y=m,v=(a("7a68"),a("0b56")),b=Object(v["a"])(y,i,s,!1,null,"19a5f185",null);e["a"]=b.exports},"7a68":function(t,e,a){"use strict";a("b851")},"84c7":function(t,e,a){"use strict";a("f180")},"9a20":function(t,e,a){"use strict";a("c50b")},a349:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("3753"),s=a("7736"),n=l("computed",s["e"]);l("computed",s["c"]),l("methods",s["b"]),l("methods",s["d"]);function l(t,e){function a(a,s){return Object(i["a"])((function(i,n){i[t]||(i[t]={});var l,o=(l={},l[n]=a,l);i[t][n]=void 0!==s?e(s,o)[n]:e(o)[n]}))}function s(t,e){if("string"===typeof e){var i=e,s=t;return a(i,void 0)(s,i)}var n=o(e),l=t;return a(l,n)}return s}function o(t){var e=t&&t.namespace;if("string"===typeof e)return"/"!==e[e.length-1]?e+"/":e}},ac39:function(t,e,a){"use strict";a.r(e);a("3441"),a("a450");var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"medicalManager flex"},[e("div",{staticClass:"content flex"},[e("div",{staticClass:"standard-content"},[e("div",{staticClass:"title"},[t._v("标准药品字典")]),e("div",{staticClass:"search flex mt-10"},[e("el-input",{staticClass:"keyword mr-10",attrs:{size:"mini",placeholder:"药品名称",clearable:!0},on:{clear:t.getDrugsDataList},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getDrugsDataList.apply(null,arguments)}},model:{value:t.standardKey,callback:function(e){t.standardKey=e},expression:"standardKey"}}),e("el-select",{staticClass:"select-box mr-10",attrs:{size:"mini",filterable:"",placeholder:"请选择"},on:{change:t.getDrugsDataList},model:{value:t.currentDrugClassCode,callback:function(e){t.currentDrugClassCode=e},expression:"currentDrugClassCode"}},t._l(t.drugClassList,(function(t){return e("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1),e("el-select",{staticClass:"select-box mr-10",attrs:{size:"mini",filterable:"",placeholder:"请选择病种"},on:{change:t.getDrugsDataList},model:{value:t.disease,callback:function(e){t.disease=e},expression:"disease"}},t._l(t.diseaseList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.code}})})),1),e("el-button",{attrs:{icon:"el-icon-search",size:"mini",circle:""},on:{click:t.getDrugsDataList}})],1),e("el-table",{staticClass:"standard-table",attrs:{data:t.standardList,height:"100%","highlight-current-row":"","header-row-class-name":"table-header","row-class-name":t.tableRowClassName},on:{"row-dblclick":t.standDbClick,"row-click":t.standClick}},[e("el-table-column",{attrs:{prop:"code",label:"药品主键代码","min-width":"110"}}),e("el-table-column",{attrs:{prop:"name",label:"标准药品名称","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n            "+t._s(a.row.name)+"\n            "),e("i",{staticClass:"searchName",attrs:{tyep:"primary"},on:{click:function(e){return t.getSingleItem(a.row)}}})]}}])}),e("el-table-column",{attrs:{prop:"drugDosageFormName",label:"剂型","min-width":"120"}}),e("el-table-column",{attrs:{prop:"drugClassName",label:"类别","min-width":"120"}})],1),e("pagination",{attrs:{page:t.sPage,size:t.sSize,layout:t.layout,total:t.sTotal},on:{"update:page":function(e){t.sPage=e},"update:size":function(e){t.sSize=e},getTableData:t.getDrugsDataList}}),e("el-dialog",{attrs:{title:"肺炎专科视图/关键用药",visible:t.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showDialog=e}}},[e("el-form",{ref:"singleItem",attrs:{model:t.singleItem,"label-width":"160px"}},[e("el-form-item",{attrs:{label:"药品名称：",prop:"name"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.name,callback:function(e){t.$set(t.singleItem,"name",e)},expression:"singleItem.name"}})],1),e("el-form-item",{attrs:{label:"药品简称：",prop:"abbreviation"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.abbreviation,callback:function(e){t.$set(t.singleItem,"abbreviation",e)},expression:"singleItem.abbreviation"}})],1),e("el-form-item",{attrs:{label:"药品剂型：",prop:"drugDosageFormName"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.drugDosageFormName,callback:function(e){t.$set(t.singleItem,"drugDosageFormName",e)},expression:"singleItem.drugDosageFormName"}})],1),e("el-form-item",{attrs:{label:"药品分类：",prop:"drugCategoryName"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.drugCategoryName,callback:function(e){t.$set(t.singleItem,"drugCategoryName",e)},expression:"singleItem.drugCategoryName"}})],1),e("el-form-item",{attrs:{label:"是否核心：",prop:"focus"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.focus,callback:function(e){t.$set(t.singleItem,"focus",e)},expression:"singleItem.focus"}})],1),e("el-form-item",{attrs:{label:"临床意义：",prop:"significance"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.significance,callback:function(e){t.$set(t.singleItem,"significance",e)},expression:"singleItem.significance"}})],1),e("el-form-item",{attrs:{label:"关注内容：",prop:"content"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"32","auto-complete":"off"},model:{value:t.singleItem.content,callback:function(e){t.$set(t.singleItem,"content",e)},expression:"singleItem.content"}})],1)],1)],1)],1),e("div",{staticClass:"hospital-content"},[e("div",{staticClass:"title flex flex-pack-justify-between"},[t._v("\n        院内药品字典\n        "),e("el-button",{staticClass:"query-btn",attrs:{type:"success",disabled:!t.isKnowledge},on:{click:t.oneKeyMapping}},[t._v("\n          映射\n        ")])],1),e("div",{staticClass:"search flex flex-pack-justify-between mt-10"},[e("div",[e("el-input",{staticClass:"keyword mr-10",attrs:{size:"mini",placeholder:"药品名称",clearable:!0},on:{clear:t.getHospitalList},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getHospitalList.apply(null,arguments)}},model:{value:t.hospitalKey,callback:function(e){t.hospitalKey=e},expression:"hospitalKey"}}),e("el-select",{staticClass:"select-box mr-20",attrs:{size:"mini",placeholder:"请选择"},on:{change:t.getHospitalList},model:{value:t.hospitalClass,callback:function(e){t.hospitalClass=e},expression:"hospitalClass"}},t._l(t.hospitalClassList,(function(t){return e("el-option",{key:t.ypflkey,attrs:{label:t.name,value:t.ypflkey}})})),1),e("el-select",{staticClass:"mapping-select mr-10",attrs:{size:"mini",placeholder:"请选择"},on:{change:t.getHospitalList},model:{value:t.isFocus,callback:function(e){t.isFocus=e},expression:"isFocus"}},t._l(t.isFocusSelect,(function(t){return e("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1),e("el-button",{attrs:{icon:"el-icon-search",size:"mini",circle:""},on:{click:t.getHospitalList}})],1)]),e("el-table",{staticClass:"hospital-table",attrs:{data:t.hospitalList,height:"100%","highlight-current-row":"","header-row-class-name":"table-header"},on:{"row-dblclick":t.hospitalClick}},[e("el-table-column",{attrs:{label:"映射","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.drugEntity?e("i",{staticClass:"mapping",on:{click:function(e){return t.saveMapping(a.row)}}}):e("i",{staticClass:"unMapping",on:{click:function(e){return t.saveMapping(a.row)}}})]}}])}),t.hospitalKey?e("el-table-column",{attrs:{label:"当前映射","max-width":"20"},scopedSlots:t._u([{key:"default",fn:function(a){return[1===a.row.sort?e("i",{staticClass:"status"}):t._e()]}}],null,!1,3674837239)}):t._e(),e("el-table-column",{attrs:{prop:"ypmc",label:"院内药品名称","min-width":"120"}}),e("el-table-column",{attrs:{label:"标准药品名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.drugEntity?e.row.drugEntity.name:"")+"\n          ")]}}])}),e("el-table-column",{attrs:{prop:"ypgg",label:"规格","min-width":"120"}}),e("el-table-column",{attrs:{prop:"flmc",label:"药品分类","min-width":"120"}})],1),e("pagination",{attrs:{page:t.hPage,size:t.hSize,layout:t.layout,pagerCount:t.pagerCount,total:t.hTotal},on:{"update:page":function(e){t.hPage=e},"update:size":function(e){t.hSize=e},getTableData:t.getHospitalList}})],1)])])},s=[],n=(a("7afe"),a("f13c")),l=a("ae5e"),o=a("acac"),c=a("2ad3"),r=a("e0e5"),u=a("fd63"),p=a("e4a1"),g=a("6407"),d=a("74d7"),f=a("a349");function h(t){var e=m();return function(){var a,i=Object(r["a"])(t);if(e){var s=Object(r["a"])(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return Object(c["a"])(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var y=function(t){Object(o["a"])(a,t);var e=h(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.standardList=[],t.hospitalList=[],t.drugClassList=[{code:"-1",name:"全部"}],t.diseaseList=[{code:"-1",name:"全部"}],t.currentDrugClassCode="-1",t.showDialog=!1,t.standardKey="",t.hospitalKey="",t.disease="-1",t.activeView={},t.sPage=1,t.sSize=50,t.sTotal=0,t.hPage=1,t.hSize=50,t.hTotal=0,t.layout="total, sizes, prev, pager, next",t.pagerCount=5,t.isFocusSelect=[{code:"-1",name:"全部"},{code:"1",name:"已映射"},{code:"2",name:"未映射"}],t.hospitalClassList=[],t.hospitalClass="-1",t.isFocus="-1",t.activeDrug={},t.singleItem={name:"",abbreviation:"",drugDosageFormName:"",drugCategoryName:"",content:"",significance:"",focus:""},t}return Object(l["a"])(a,[{key:"changeYljgdm",value:function(){this.getDrugsDataList(),this.getHospitalList()}},{key:"mounted",value:function(){this.listDrugClasses(),this.getAllYpfl(),this.getHospitalList(),this.getDrugsDataList(),this.listDisease()}},{key:"tableRowClassName",value:function(t){var e=t.row;t.rowIndex;return e.id===this.activeDrug.id?"active-row":e.jlzt?"success-row":""}},{key:"listDisease",value:function(){var t=this;this.$api.listDisease({yljgdm:this.configYljgdm}).then((function(e){var a=e.data||[];a.map((function(e){t.diseaseList.push({code:e.diseaseCode,name:e.diseaseName})}))})).catch((function(t){}))}},{key:"getActiveView",value:function(t){this.activeView=t}},{key:"getDrugsDataList",value:function(){var t=this,e={searchKey:this.standardKey,drugClassCode:this.currentDrugClassCode,diseaseCode:this.disease,yljgdm:this.configYljgdm,page:this.sPage,size:this.sSize};this.$api.standardListDrugs(e).then((function(e){var a=e.data||{};t.standardList=a.content||[],t.sTotal=a.totalElements||0})).catch((function(t){}))}},{key:"getHospitalList",value:function(){var t=this,e={searchKey:this.hospitalKey,ypflKey:this.hospitalClass,yljgdm:this.configYljgdm,isMapping:this.isFocus,page:this.hPage,size:this.hSize};this.$api.getHospitalMedicalList(e).then((function(e){var a=e.data||{};t.hospitalList=a.content||[],t.hTotal=a.totalElements||0})).catch((function(t){}))}},{key:"getSingleItem",value:function(t){var e=this;this.singleItem={name:t.name,abbreviation:t.abbreviation,drugDosageFormName:t.drugDosageFormName,drugCategoryName:t.drugCategoryName,content:t.content,significance:t.significance,focus:t.focus},this.showDialog=!0,this.$nextTick((function(){e.$refs.singleItem.clearValidate()}))}},{key:"oneKeyMapping",value:function(){var t=this;this.$confirm("确认进行映射么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.autoMapping()})).catch((function(){}))}},{key:"autoMapping",value:function(){var t=this,e={yljgdm:this.configYljgdm,id:this.activeView.id};this.$api.autoMapping(e).then((function(e){t.$notify({title:"成功",message:"映射成功"+e.data+"个药品！",type:"success"}),t.getHospitalList(),t.getDrugsDataList()})).catch((function(t){}))}},{key:"saveMapping",value:function(t){var e=this;if(this.isKnowledge){var a=t.drugEntity?"取消映射":"映射";if(t.drugEntity||this.activeDrug.code){var i={id:t.drugEntity?t.drugEntity.id:"",yljgdm:this.configYljgdm,standardId:this.activeDrug.code,hospitalId:t.idm,type:"DRUG"};this.$api.saveLisOrDrugMapping(i).then((function(t){e.$notify({title:"成功",message:a+"成功！",type:"success"}),e.getHospitalList(),e.getDrugsDataList()})).catch((function(t){}))}else this.$alert("请选择一项标准药品",{confirmButtonText:"确定"})}else this.$message.warning("您没有权限，请更换账号！")}},{key:"hospitalClick",value:function(t){this.standardKey=t.ypmc,this.getDrugsDataList()}},{key:"getAllYpfl",value:function(){var t=this;this.$api.getAllYpfl().then((function(e){var a=[{ypflkey:"-1",name:"全部"}];t.hospitalClassList=a.concat(e.data||[])})).catch((function(t){}))}},{key:"standDbClick",value:function(t){this.activeDrug=t,this.hospitalKey=t.name,this.getHospitalList()}},{key:"standClick",value:function(t){this.activeDrug=t}},{key:"listDrugClasses",value:function(){var t=this;this.$api.getRelationship().then((function(e){var a=e.data||[];a.map((function(e){t.drugClassList.push({code:e.drugClassCode,name:e.drugClassName})}))})).catch((function(t){}))}}]),a}(p["c"]);Object(u["a"])([f["a"]],y.prototype,"configYljgdm",void 0),Object(u["a"])([f["a"]],y.prototype,"isKnowledge",void 0),Object(u["a"])([Object(p["d"])("configYljgdm")],y.prototype,"changeYljgdm",null),y=Object(u["a"])([Object(p["a"])({name:"medicalManager",components:{pagination:g["a"],specialistMenu:d["a"]}})],y);var v=y,b=v,C=(a("9a20"),a("0b56")),k=Object(C["a"])(b,i,s,!1,null,"42731e57",null);e["default"]=k.exports},b851:function(t,e,a){},c50b:function(t,e,a){},f180:function(t,e,a){}}]);