(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07f2efcc"],{6407:function(e,o,t){"use strict";var r=function(){var e=this,o=e._self._c;e._self._setupProxy;return o("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"pager-count":e.pagerCount},on:{"update:currentPage":function(o){e.currentPage=o},"update:current-page":function(o){e.currentPage=o},"update:pageSize":function(o){e.pageSize=o},"update:page-size":function(o){e.pageSize=o},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},l=[],a=(t("7afe"),t("f13c")),u=t("ae5e"),s=t("acac"),n=t("2ad3"),i=t("e0e5"),c=t("fd63"),d=t("e4a1");function m(e){var o=p();return function(){var t,r=Object(i["a"])(e);if(o){var l=Object(i["a"])(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return Object(n["a"])(this,t)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(s["a"])(t,e);var o=m(t);function t(){return Object(a["a"])(this,t),o.apply(this,arguments)}return Object(u["a"])(t,[{key:"currentPage",get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},{key:"pageSize",get:function(){return this.size},set:function(e){this.$emit("update:size",e)}},{key:"handleSizeChange",value:function(e){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(e){this.$emit("getTableData")}}]),t}(d["c"]);Object(c["a"])([Object(d["b"])({required:!0})],f.prototype,"total",void 0),Object(c["a"])([Object(d["b"])({default:1})],f.prototype,"page",void 0),Object(c["a"])([Object(d["b"])({default:10})],f.prototype,"size",void 0),Object(c["a"])([Object(d["b"])({default:7})],f.prototype,"pagerCount",void 0),Object(c["a"])([Object(d["b"])({default:function(){return[10,20,30,50]}})],f.prototype,"pageSizes",void 0),Object(c["a"])([Object(d["b"])({default:"total, sizes, prev, pager, next, jumper"})],f.prototype,"layout",void 0),f=Object(c["a"])([Object(d["a"])({name:"pagination"})],f);var b=f,h=b,v=(t("84c7"),t("0b56")),g=Object(v["a"])(h,r,l,!1,null,"7e267c7f",null);o["a"]=g.exports},"84c7":function(e,o,t){"use strict";t("f180")},aa49:function(e,o,t){"use strict";t.r(o);t("a450");var r=function(){var e=this,o=e._self._c;e._self._setupProxy;return o("div",{staticClass:"module-manager flex flex-v"},[o("div",{staticClass:"tool-bar flex flex-pack-justify-between"},[o("div",[o("el-input",{staticClass:"w-200",attrs:{placeholder:"模块名称",clearable:""},on:{clear:e.getSearch},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.getSearch.apply(null,arguments)}},model:{value:e.moduleName,callback:function(o){e.moduleName=o},expression:"moduleName"}}),o("el-button",{attrs:{type:"primary"},on:{click:e.getSearch}},[e._v("查询")])],1),o("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.addModule}},[e._v("\n      新增\n    ")])],1),o("div",{staticClass:"flex-1 content"},[o("el-table",{attrs:{data:e.moduleList,stripe:""}},[o("el-table-column",{attrs:{type:"index","min-width":"50"}}),o("el-table-column",{attrs:{prop:"moduleCode",label:"编码","min-width":"180",sortable:""}}),o("el-table-column",{attrs:{prop:"moduleName",label:"名称","min-width":"180",sortable:""}}),o("el-table-column",{attrs:{prop:"moduleUrl",label:"链接","min-width":"300",sortable:""}}),o("el-table-column",{attrs:{prop:"moduleStatus",label:"状态","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(o){return[e._v("\n          "+e._s("0"===o.row.moduleStatus?"正常":"1"===o.row.moduleStatus?"正在调试":"")+"\n        ")]}}])}),o("el-table-column",{attrs:{prop:"note",label:"备注","min-width":"230"}}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.handleEditBtnClick(t.row)}}},[e._v("\n            编辑\n          ")])]}}])})],1),o("pagination",{staticClass:"page-select",attrs:{page:e.curPage,size:e.pageLen,total:e.totalCount},on:{"update:page":function(o){e.curPage=o},"update:size":function(o){e.pageLen=o},getTableData:e.getModuleList}})],1),o("el-dialog",{attrs:{title:e.isAdd?"新增模块":"编辑模块",visible:e.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(o){e.showDialog=o}}},[o("el-form",{ref:"moduleForm",attrs:{"label-position":"right",model:e.moduleForm,"label-width":"110px",rules:e.moduleRules}},[o("el-form-item",{attrs:{label:"名称",prop:"moduleName"}},[o("el-input",{attrs:{placeholder:"请输入名称",maxlength:20,"auto-complete":"off"},model:{value:e.moduleForm.moduleName,callback:function(o){e.$set(e.moduleForm,"moduleName",o)},expression:"moduleForm.moduleName"}})],1),o("el-form-item",{attrs:{label:"别名",prop:"moduleAlias"}},[o("el-input",{attrs:{placeholder:"请输入别名",maxlength:20,"auto-complete":"off"},model:{value:e.moduleForm.moduleAlias,callback:function(o){e.$set(e.moduleForm,"moduleAlias",o)},expression:"moduleForm.moduleAlias"}})],1),o("el-form-item",{attrs:{label:"编码",prop:"moduleCode"}},[o("el-input",{attrs:{placeholder:"请输入模块编码",maxlength:20,"auto-complete":"off"},model:{value:e.moduleForm.moduleCode,callback:function(o){e.$set(e.moduleForm,"moduleCode",o)},expression:"moduleForm.moduleCode"}})],1),o("el-form-item",{attrs:{label:"链接",prop:"moduleUrl"}},[o("el-input",{attrs:{placeholder:"请输入模块链接",disabled:!0,maxlength:200,"auto-complete":"off"},model:{value:e.moduleForm.moduleUrl,callback:function(o){e.$set(e.moduleForm,"moduleUrl",o)},expression:"moduleForm.moduleUrl"}})],1),o("el-form-item",{attrs:{label:"显示模式",prop:"showMode"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:e.getLcwdNumberList},model:{value:e.moduleForm.showMode,callback:function(o){e.$set(e.moduleForm,"showMode",o)},expression:"moduleForm.showMode"}},e._l(e.showModeOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.value,value:e.label}})})),1)],1),o("el-form",{attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"文档类型",prop:"lcwdNumber"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择",filterable:""},model:{value:e.moduleForm.lcwdNumber,callback:function(o){e.$set(e.moduleForm,"lcwdNumber",o)},expression:"moduleForm.lcwdNumber"}},e._l(e.lcwdNumberList,(function(e,t){return o("el-option",{key:t,attrs:{label:e.resourceName,value:e.resourceCode}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.moduleForm.showMode,expression:"moduleForm.showMode === '1'"}]},[o("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(o){return e.addResource.apply(null,arguments)}}},[e._v("\n            新增类型\n          ")])],1)],1),!1===e.isAdd?o("el-form-item",{attrs:{label:"模块状态",prop:"moduleStatus"}},[o("el-radio-group",{model:{value:e.moduleForm.moduleStatus,callback:function(o){e.$set(e.moduleForm,"moduleStatus",o)},expression:"moduleForm.moduleStatus"}},[o("el-radio",{attrs:{label:"0"}},[e._v("正常")]),o("el-radio",{attrs:{label:"1"}},[e._v("正在调试")])],1)],1):e._e(),o("el-form-item",{attrs:{label:"说明",prop:"note"}},[o("el-input",{attrs:{type:"textarea",placeholder:"不可超过50字!",maxlength:50},model:{value:e.moduleForm.note,callback:function(o){e.$set(e.moduleForm,"note",o)},expression:"moduleForm.note"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(o){e.showDialog=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(o){return e.submitModuleForm.apply(null,arguments)}}},[e._v("提交")])],1)],1),o("el-dialog",{attrs:{title:"新增资源",visible:e.showResourceDialog,"close-on-click-modal":!1},on:{"update:visible":function(o){e.showResourceDialog=o}}},[o("el-form",{ref:"resourceForm",attrs:{model:e.resourceForm,"label-width":"80px",rules:e.moduleRules}},[o("el-form-item",{attrs:{label:"资源分类",prop:"resourceType"}},[o("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:e.resourceForm.resourceType,callback:function(o){e.$set(e.resourceForm,"resourceType",o)},expression:"resourceForm.resourceType"}})],1),o("el-form-item",{attrs:{label:"资源名称",prop:"resourceName"}},[o("el-input",{attrs:{maxlength:25,"auto-complete":"off"},model:{value:e.resourceForm.resourceName,callback:function(o){e.$set(e.resourceForm,"resourceName",o)},expression:"resourceForm.resourceName"}})],1),o("el-form-item",{attrs:{label:"资源编码",prop:"resourceCode"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.resourceForm.resourceCode,callback:function(o){e.$set(e.resourceForm,"resourceCode",o)},expression:"resourceForm.resourceCode"}})],1),o("el-form-item",{attrs:{label:"外部链接",prop:"externalLink"}},[o("el-input",{attrs:{maxlength:500,"auto-complete":"off"},model:{value:e.resourceForm.externalLink,callback:function(o){e.$set(e.resourceForm,"externalLink",o)},expression:"resourceForm.externalLink"}})],1),o("el-form-item",{attrs:{label:"浏览器",prop:"browser",clearable:""}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.resourceForm.browser,callback:function(o){e.$set(e.resourceForm,"browser",o)},expression:"resourceForm.browser"}},e._l(e.browserType,(function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),o("el-form-item",{attrs:{label:"机构名称",prop:"institutionCode"}},[o("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请输入机构名称"},model:{value:e.resourceForm.institutionCode,callback:function(o){e.$set(e.resourceForm,"institutionCode",o)},expression:"resourceForm.institutionCode"}},e._l(e.institutionList,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})})),1)],1),o("el-form-item",{attrs:{label:"打开方式",prop:"openWay"}},[o("el-select",{model:{value:e.resourceForm.openWay,callback:function(o){e.$set(e.resourceForm,"openWay",o)},expression:"resourceForm.openWay"}},e._l(e.openWayList,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[o("el-switch",{attrs:{"on-text":"ON","off-text":"OFF","active-value":1,"inactive-value":0},model:{value:e.resourceForm.enable,callback:function(o){e.$set(e.resourceForm,"enable",o)},expression:"resourceForm.enable"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(o){e.showResourceDialog=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(o){return e.addResourceSubmit.apply(null,arguments)}}},[e._v("\n        提交\n      ")])],1)],1)],1)},l=[],a=(t("7afe"),t("f13c")),u=t("ae5e"),s=t("acac"),n=t("2ad3"),i=t("e0e5"),c=t("fd63"),d=t("e4a1"),m=t("6407");function p(e){var o=f();return function(){var t,r=Object(i["a"])(e);if(o){var l=Object(i["a"])(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return Object(n["a"])(this,t)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(s["a"])(t,e);var o=p(t);function t(){var e;return Object(a["a"])(this,t),e=o.apply(this,arguments),e.moduleName="",e.moduleList=[],e.curPage=1,e.browserType=[{code:"ie",name:"IE浏览器"},{code:"firefox",name:"火狐浏览器"},{code:"chrome",name:"谷歌浏览器"}],e.openWayList=[{value:"0",label:"内嵌打开"},{value:"1",label:"弹出打开"}],e.pageLen=10,e.totalCount=0,e.isAdd=!0,e.showDialog=!1,e.showResourceDialog=!1,e.showModeOptions=[{value:"打开第三方系统",label:"1"},{value:"展示标题和内容",label:"2"}],e.itemList=[],e.moduleForm={id:0,moduleClass:0,enable:1,isUnstrunct:1,moduleCode:"",moduleName:"",moduleUrl:"/views/template/index",moduleAlias:"",note:"",orderno:0,moduleType:0,lcwdNumber:"",showMode:"1",moduleStatus:""},e.institutionList=[],e.resourceForm={id:0,resourceType:"medical-record",resourceName:"",externalLink:"",institutionName:"",institutionCode:"",browser:"",enable:1,resourceCode:"",resourceCodeArr:"",openWay:""},e.moduleRules={moduleCode:[{required:!0,validator:e.validateCode,trigger:"blur"}],moduleName:[{required:!0,validator:e.validateName,trigger:"blur"}],moduleAlias:[{required:!0,validator:e.validateAlias,trigger:"blur"}],moduleUrl:[{required:!0,validator:e.validateModuleUrl,trigger:"blur"}],note:[{required:!1,validator:e.validateNote,trigger:"blur"}],resourceName:[{required:!0,message:"资源名称不能为空",trigger:"blur"}],externalLink:[{required:!0,message:"请填写外部链接",trigger:"blur"}],institutionCode:[{required:!0,message:"请选择医疗机构",trigger:"blur"}],resourceCode:[{required:!0,message:"请填写资源编码",trigger:"blur"}],openWay:[{required:!0,message:"请选择链接打开方式",trigger:"change"}]},e.lcwdNumberList=[],e}return Object(u["a"])(t,[{key:"mounted",value:function(){this.getModuleList()}},{key:"listInstitutions",value:function(){var e=this;this.$api.listInstitutions().then((function(o){e.institutionList=o.data||[],e.showResourceDialog=!0})).catch((function(e){}))}},{key:"addResource",value:function(){this.resourceForm={id:0,resourceType:"medical-record",resourceName:"",externalLink:"",institutionName:"",institutionCode:"",browser:"",enable:1,resourceCode:"",resourceCodeArr:"",openWay:""},this.$refs["resourceForm"]&&this.$refs.resourceForm.resetFields(),this.listInstitutions()}},{key:"getSearch",value:function(){this.curPage=1,this.getModuleList()}},{key:"getLcwdNumberList",value:function(){var e=this;"1"===this.moduleForm.showMode?this.$api.getResourceConfigList().then((function(o){e.lcwdNumberList=o.data||[]})).catch((function(e){})):this.lcwdNumberList=[{resourceName:"病历",resourceCode:"1"},{resourceName:"体检报告",resourceCode:"2"},{resourceName:"CDA",resourceCode:"3"},{resourceName:"护理病历",resourceCode:"6"},{resourceName:"重症监护单",resourceCode:"7"},{resourceName:"麻醉记录单",resourceCode:"8"},{resourceName:"纸质病历翻拍",resourceCode:"9"},{resourceName:"抢救单据",resourceCode:"10"},{resourceName:"营养",resourceCode:"11"},{resourceName:"康复治疗单",resourceCode:"12"},{resourceName:"门诊评估单",resourceCode:"13"},{resourceName:"血透治疗单",resourceCode:"14"},{resourceName:"放疗文书",resourceCode:"16"}]}},{key:"addModule",value:function(){this.isAdd=!0,this.showDialog=!0,this.moduleForm={id:0,moduleClass:0,enable:1,isUnstrunct:1,moduleCode:"",moduleName:"",moduleUrl:"/views/template/index",moduleAlias:"",note:"",orderno:0,moduleType:0,lcwdNumber:"",showMode:"1",moduleStatus:""},this.$refs["moduleForm"]&&this.$refs.moduleForm.resetFields(),this.getLcwdNumberList()}},{key:"getModuleList",value:function(){var e=this,o={moduleName:this.moduleName,page:this.curPage,size:this.pageLen};this.$api.getModuleByNameLike(o).then((function(o){o.data&&(e.moduleList=o.data.content||[],e.totalCount=o.data.totalElements||0)})).catch((function(e){}))}},{key:"validateCode",value:function(e,o){var t=this;return new Promise((function(e,r){var l=/^[a-zA-Z0-9-\u4e00-\u9fa5]+$/g;if(""===o)return r("请输入模块编码！");if(!l.test(t.moduleForm.moduleCode))return r("请输入1-20个字母/汉字/数字/横线！");var a={moduleCode:t.moduleForm.moduleCode,key:t.isAdd?-1:t.moduleForm.id};t.$api.isExistByModuleCode(a).then((function(o){return o.data?r("模块编码已存在！"):e()})).catch((function(e){}))}))}},{key:"validateName",value:function(e,o){var t=this;return new Promise((function(e,r){var l=/^[\w\u4e00-\u9fa5]{1,20}$/g;if(""===o)return r("请输入模块名称!");if(!l.test(t.moduleForm.moduleName))return r("请输入1-20个字母/汉字/数字/下划线！");var a={moduleName:t.moduleForm.moduleName,key:t.isAdd?-1:t.moduleForm.id};t.$api.isExistByModuleName(a).then((function(o){return o.data?r("模块编码已存在！"):e()})).catch((function(e){}))}))}},{key:"addResourceSubmit",value:function(){var e=this;this.$refs.resourceForm.validate((function(o){e.resourceForm.resourceCodeArr=e.resourceForm.resourceCode,o&&e.$api.addResourceConfig(e.resourceForm).then((function(o){e.showResourceDialog=!1,e.$notify({title:"成功",message:"添加成功！",type:"success"}),e.moduleForm.lcwdNumber=e.resourceForm.resourceName,e.getLcwdNumberList()})).catch((function(e){}))}))}},{key:"submitModuleForm",value:function(){var e=this;this.$refs.moduleForm.validate((function(o){if(o){var t={id:e.moduleForm.id,moduleClass:e.moduleForm.moduleClass,moduleCode:e.moduleForm.moduleCode,moduleName:e.moduleForm.moduleName,moduleUrl:e.moduleForm.moduleUrl,moduleAlias:e.moduleForm.moduleAlias,enable:e.moduleForm.enable,note:e.moduleForm.note,orderno:e.moduleForm.orderno,moduleType:e.moduleForm.moduleType,isUnstrunct:e.moduleForm.isUnstrunct,lcwdNumber:e.moduleForm.lcwdNumber,showMode:e.moduleForm.showMode,moduleStatus:e.moduleForm.moduleStatus,isAdd:e.isAdd};e.$api.addModule(t).then((function(o){e.showDialog=!1,e.$notify({title:"成功",message:e.isAdd?"添加成功！":"修改成功",type:"success"}),e.getModuleList()})).catch((function(e){}))}}))}},{key:"handleEditBtnClick",value:function(e){this.isAdd=!1,this.showDialog=!0,console.log(e.moduleStatus),this.moduleForm={id:e.id,moduleClass:e.moduleClass,moduleCode:e.moduleCode,moduleName:e.moduleName,moduleUrl:e.moduleUrl,moduleAlias:e.moduleAlias,enable:e.enable,note:e.note,orderno:e.orderno,moduleType:e.moduleType,isUnstrunct:e.isUnstrunct,lcwdNumber:e.lcwdNumber,showMode:e.showMode,moduleStatus:e.moduleStatus},this.$refs["moduleForm"]&&this.$refs.moduleForm.resetFields(),this.getLcwdNumberList()}},{key:"validateAlias",value:function(e,o,t){var r=/^[\w\u4e00-\u9fa5]{1,20}$/g;""===o?t(new Error("请输入模块别名!")):r.test(this.moduleForm.moduleAlias)?t():t(new Error("请输入1-20个字母/汉字/数字/下划线"))}},{key:"validateModuleUrl",value:function(e,o,t){100<o.length?t(new Error("模块链接不可超过100个字符,已输入"+o.length)):t()}},{key:"validateNote",value:function(e,o,t){null!==o&&""!==o&&o.length>100?t(new Error("备注不可超过100个字符!")):t()}}]),t}(d["c"]);b=Object(c["a"])([Object(d["a"])({name:"ModuleManager",components:{pagination:m["a"]}})],b);var h=b,v=h,g=(t("ec89"),t("0b56")),y=Object(g["a"])(v,r,l,!1,null,"0bacbf2f",null);o["default"]=y.exports},c6d6:function(e,o,t){},ec89:function(e,o,t){"use strict";t("c6d6")},f180:function(e,o,t){}}]);