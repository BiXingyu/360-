(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59dbf6b2"],{"01ef":function(t,e,a){},6407:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total,"pager-count":t.pagerCount},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})},o=[],i=(a("7afe"),a("f13c")),l=a("ae5e"),r=a("acac"),s=a("2ad3"),c=a("e0e5"),u=a("fd63"),p=a("e4a1");function y(t){var e=f();return function(){var a,n=Object(c["a"])(t);if(e){var o=Object(c["a"])(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return Object(s["a"])(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var m=function(t){Object(r["a"])(a,t);var e=y(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"currentPage",get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},{key:"pageSize",get:function(){return this.size},set:function(t){this.$emit("update:size",t)}},{key:"handleSizeChange",value:function(t){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(t){this.$emit("getTableData")}}]),a}(p["c"]);Object(u["a"])([Object(p["b"])({required:!0})],m.prototype,"total",void 0),Object(u["a"])([Object(p["b"])({default:1})],m.prototype,"page",void 0),Object(u["a"])([Object(p["b"])({default:10})],m.prototype,"size",void 0),Object(u["a"])([Object(p["b"])({default:7})],m.prototype,"pagerCount",void 0),Object(u["a"])([Object(p["b"])({default:function(){return[10,20,30,50]}})],m.prototype,"pageSizes",void 0),Object(u["a"])([Object(p["b"])({default:"total, sizes, prev, pager, next, jumper"})],m.prototype,"layout",void 0),m=Object(u["a"])([Object(p["a"])({name:"pagination"})],m);var d=m,b=d,h=(a("84c7"),a("0b56")),v=Object(h["a"])(b,n,o,!1,null,"7e267c7f",null);e["a"]=v.exports},7974:function(t,e,a){"use strict";a("01ef")},"84c7":function(t,e,a){"use strict";a("f180")},c25f:function(t,e,a){"use strict";a.r(e);a("a450");var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"type-maintain flex flex-v"},[e("div",{staticClass:"flex flex-pack-justify-between flex-align-center"},[e("span",[e("el-input",{staticClass:"w-200",attrs:{placeholder:"请输入类别编码、名称",clearable:""},on:{clear:t.beforeGetListYzlb},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.beforeGetListYzlb.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),e("el-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:t.beforeGetListYzlb}},[t._v("\n        查询\n      ")])],1),e("el-button",{attrs:{type:"primary"},on:{click:t.handleAddBtnClick}},[t._v("新增")])],1),e("div",{staticClass:"content-main flex-1 mt-10"},[e("el-table",{attrs:{data:t.typeListDatas}},[e("el-table-column",{attrs:{prop:"id",label:"类别编码",width:"100"}}),e("el-table-column",{attrs:{prop:"name",label:"类别名称","min-width":"120"}}),e("el-table-column",{attrs:{prop:"lb",label:"类别",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.lb?"医嘱":"非医嘱")+"\n        ")]}}])}),e("el-table-column",{attrs:{prop:"ywy",label:"业务域",width:"110"}}),e("el-table-column",{attrs:{prop:"jlzt",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.jlzt?"启用":"停用")+"\n        ")]}}])}),e("el-table-column",{attrs:{prop:"mzzy",label:"就诊类别",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1===e.row.mzzy?"门诊":"住院")+"\n        ")]}}])}),e("el-table-column",{attrs:{prop:"tszt",label:"调试状态","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1===e.row.tszt?"调试中":0===e.row.tszt?"调试完成":"未调试")+"\n        ")]}}])}),e("el-table-column",{attrs:{prop:"yxj",label:"优先级"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{on:{change:function(e){return t.yxjChange(a.row)}},model:{value:a.row.yxj,callback:function(e){t.$set(a.row,"yxj",e)},expression:"scope.row.yxj"}})]}}])}),e("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"120"}}),e("el-table-column",{attrs:{label:"操作","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleEditBtnClick(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:0===a.row.jlzt?"danger":"primary"},on:{click:function(e){return t.handleDel(a.row)}}},[t._v(t._s(0===a.row.jlzt?"停用":"启用"))])]}}])})],1),e("pagination",{attrs:{page:t.page,size:t.size,total:t.total},on:{"update:page":function(e){t.page=e},"update:size":function(e){t.size=e},getTableData:t.getListYzlb}})],1),e("el-dialog",{attrs:{title:this.operationType?"新增闭环类别":"编辑闭环类别",visible:t.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showDialog=e}}},[e("el-form",{ref:"typeForm",attrs:{model:t.typeForm,"label-width":"160px",rules:t.subFormRules}},[e("el-form-item",{attrs:{label:"类别编码：",prop:"id"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{disabled:!this.operationType,placeholder:"请输入类别编码",maxlength:"32","auto-complete":"off"},model:{value:t.typeForm.id,callback:function(e){t.$set(t.typeForm,"id",e)},expression:"typeForm.id"}})],1),e("el-form-item",{attrs:{label:"类别名称：",prop:"name"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入类别名称",maxlength:"60","auto-complete":"off"},model:{value:t.typeForm.name,callback:function(e){t.$set(t.typeForm,"name",e)},expression:"typeForm.name"}})],1),e("el-form-item",{attrs:{label:"业务域：",prop:"ywy"}},[e("el-select",{staticStyle:{width:"80%"},model:{value:t.typeForm.ywy,callback:function(e){t.$set(t.typeForm,"ywy",e)},expression:"typeForm.ywy"}},t._l(t.ywyOptions,(function(t){return e("el-option",{key:t.id,attrs:{placeholder:"请选择",label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"类型：",prop:"lb"}},[e("el-radio-group",{model:{value:t.typeForm.lb,callback:function(e){t.$set(t.typeForm,"lb",e)},expression:"typeForm.lb"}},[e("el-radio",{attrs:{label:0}},[t._v("医嘱")]),e("el-radio",{attrs:{label:1}},[t._v("非医嘱")])],1)],1),e("el-form-item",{attrs:{label:"就诊类别：",prop:"mzzy"}},[e("el-radio-group",{model:{value:t.typeForm.mzzy,callback:function(e){t.$set(t.typeForm,"mzzy",e)},expression:"typeForm.mzzy"}},[e("el-radio",{attrs:{label:1}},[t._v("门诊")]),e("el-radio",{attrs:{label:t.isOldClose?2:4}},[t._v("住院")])],1)],1),e("el-form-item",{attrs:{label:"状态：",prop:"jlzt"}},[e("el-checkbox",{attrs:{value:"0"},model:{value:t.typeForm.checked,callback:function(e){t.$set(t.typeForm,"checked",e)},expression:"typeForm.checked"}},[t._v("启用")])],1),e("el-form-item",{attrs:{label:"调试状态：",prop:"tszt"}},[e("el-radio-group",{model:{value:t.typeForm.tszt,callback:function(e){t.$set(t.typeForm,"tszt",e)},expression:"typeForm.tszt"}},[e("el-radio",{attrs:{label:1}},[t._v("调试中")]),e("el-radio",{attrs:{label:0}},[t._v("调试完成")]),e("el-radio",{attrs:{label:3}},[t._v("未调试")])],1)],1),e("el-form-item",{attrs:{label:"备注内容：",prop:"memo"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",maxlength:"24","show-word-limit":"",autosize:{minRows:4,maxRows:10}},model:{value:t.typeForm.memo,callback:function(e){t.$set(t.typeForm,"memo",e)},expression:"typeForm.memo"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(e){return t.closeDialog.apply(null,arguments)}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitTypeForm.apply(null,arguments)}}},[t._v("\n        保存\n      ")])],1)],1)],1)},o=[],i=(a("7afe"),a("1bc7"),a("f13c")),l=a("ae5e"),r=a("acac"),s=a("2ad3"),c=a("e0e5"),u=a("fd63"),p=a("e4a1"),y=a("6407");function f(t){var e=m();return function(){var a,n=Object(c["a"])(t);if(e){var o=Object(c["a"])(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return Object(s["a"])(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var d=function(t){Object(r["a"])(a,t);var e=f(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.typeListDatas=[],t.keyword="",t.page=1,t.size=10,t.total=0,t.operationType=1,t.showDialog=!1,t.ywyOptions=[],t.typeForm={id:"",name:"",ywy:"",lb:0,mzzy:1,jlzt:0,checked:!0,tszt:0,memo:""},t.subFormRules={id:[{required:!0,validator:t.validExistId,trigger:"blur"}],name:[{required:!0,message:"请输入类别名称",trigger:"blur"}],ywy:[{required:!0,message:"请选择业务域",trigger:"change"}]},t.isOldClose=!1,t}return Object(l["a"])(a,[{key:"mounted",value:function(){this.isOldClose=window.CONFIG.iframeUrl.indexOf("/bh/closeloop")>-1,this.getListYzlb()}},{key:"beforeGetListYzlb",value:function(){this.page=1,this.getListYzlb()}},{key:"getListYzlb",value:function(){var t=this,e={search_value:this.keyword,page:this.page,size:this.size};this.$api.getListYzlb(e).then((function(e){e.data&&(t.typeListDatas=e.data.content||[],t.total=e.data.totalElements||0)})).catch((function(t){}))}},{key:"yxjChange",value:function(t){var e=this,a={id:t.id,yxj:t.yxj};this.$api.saveYxj(a).then((function(t){e.$message.success("修改优先级成功！"),e.getListYzlb()})).catch((function(t){}))}},{key:"handleAddBtnClick",value:function(){var t=this;this.operationType=1,this.typeForm={id:"",name:"",ywy:"",lb:0,mzzy:1,jlzt:0,checked:!0,tszt:0,memo:""},this.showDialog=!0,this.$nextTick((function(){t.$refs.typeForm.clearValidate()})),this.initYwySel()}},{key:"handleEditBtnClick",value:function(t){var e=this;this.operationType=0,this.typeForm={id:t.id,name:t.name,ywy:t.ywy,lb:t.lb,mzzy:t.mzzy,jlzt:t.jlzt,checked:0===t.jlzt,tszt:t.tszt,memo:t.memo},this.showDialog=!0,this.$nextTick((function(){e.$refs.typeForm.clearValidate()})),this.initYwySel()}},{key:"initYwySel",value:function(){var t=this;this.$api.getYwySel().then((function(e){if(t.ywyOptions=e.data,!t.operationType){var a,n=t.typeForm.ywy;e.data.forEach((function(t){t.name===n&&(a=t.id)})),t.typeForm.ywy=a}})).catch((function(t){}))}},{key:"closeDialog",value:function(){this.showDialog=!1}},{key:"submitTypeForm",value:function(t){var e=this;this.$refs.typeForm.validate((function(t){if(t){var a=e.operationType?"添加成功！":"修改成功！";e.typeForm.jlzt=e.typeForm.checked?0:1;var n={id:e.typeForm.id,name:e.typeForm.name,ywy:e.typeForm.ywy,lb:e.typeForm.lb,mzzy:e.typeForm.mzzy,jlzt:e.typeForm.jlzt,memo:e.typeForm.memo,tszt:e.typeForm.tszt,yxj:1};e.operationType?e.$api.saveBhlb(n).then((function(t){e.showDialog=!1,e.$message({message:a,type:"success"}),e.getListYzlb()})).catch((function(t){})):e.$api.updateBhlb(n).then((function(t){e.showDialog=!1,e.$message({message:a,type:"success"}),e.getListYzlb()})).catch((function(t){}))}}))}},{key:"validExistId",value:function(t,e){var a=this;return new Promise((function(t,n){""===e&&n("类别编码不能为空！"),a.$api.existBhlb({id:a.typeForm.id,operationType:a.operationType}).then((function(e){return!0===e.data?n("类别编码已存在！"):t()})).catch((function(t){}))}))}},{key:"validExistName",value:function(t,e){var a=this;return new Promise((function(t,n){""===e&&n("类别名称不能为空！"),a.$api.existBhlbByName({name:a.typeForm.name}).then((function(e){return!0===e.data?n("类别名称已存在！"):t()})).catch((function(t){}))}))}},{key:"handleDel",value:function(t){var e=this,a={id:t.id,jlzt:t.jlzt};this.$api.updateBhlbStatus(a).then((function(a){0===t.jlzt?e.$message.success("该医嘱类别停用成功！"):1===t.jlzt?e.$message.success("该医嘱类别启用成功！"):e.$message.error("操作失败！"),e.getListYzlb()})).catch((function(t){}))}}]),a}(p["c"]);d=Object(u["a"])([Object(p["a"])({name:"TypeMaintain",components:{pagination:y["a"]}})],d);var b=d,h=b,v=(a("7974"),a("0b56")),g=Object(v["a"])(h,n,o,!1,null,"17963b76",null);e["default"]=g.exports},f180:function(t,e,a){}}]);