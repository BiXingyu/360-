(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45303989"],{"0c04":function(e,t,r){"use strict";r.r(t);r("a450");var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sourceDispose-container"},[t("div",{staticClass:"flex flex-pack-justify-between flex-align-center"},[t("span",[t("el-input",{staticClass:"w-200",attrs:{placeholder:"请输入关键词",clearable:""},on:{clear:e.beforeGetListYzlb},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.beforeGetListYzlb.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{staticClass:"ml-20",attrs:{type:"primary"},on:{click:e.beforeGetListYzlb}},[e._v("\n        查询\n      ")])],1),t("el-button",{attrs:{type:"primary"},on:{click:e.handleAddBtnClick}},[e._v("新增")])],1),e.sourceListDatas&&e.sourceListDatas.length>0?t("div",{staticClass:"content-main flex-1 mt-10"},[t("el-table",{staticStyle:{width:"100%",border:"1px solid #ccc","border-right":"none","border-bottom":"none"},attrs:{data:e.sourceListDatas,border:"","tooltip-effect":"dark","header-cell-style":{background:"#cedcea",color:"#606266",borderColor:"#bfbfbf"},"cell-style":{borderColor:"#bfbfbf"}}},[t("el-table-column",{attrs:{prop:"id",label:"序号",width:"80"}}),t("el-table-column",{attrs:{prop:"name",label:"数据源名称","min-width":"120"}}),t("el-table-column",{attrs:{prop:"dbClass",label:"驱动类型","min-width":"120"}}),t("el-table-column",{attrs:{prop:"serverName",label:"连接地址","min-width":"280"}}),t("el-table-column",{attrs:{prop:"account",label:"用户名","min-width":"100"}}),t("el-table-column",{attrs:{label:"操作","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditBtnClick(r.row)}}},[e._v("\n            编辑\n          ")]),t("el-button",{on:{click:function(t){return e.handleDel(r.row)}}},[e._v(" 删除 ")])]}}],null,!1,2801193422)})],1),t("pagination",{attrs:{page:e.page,size:e.size,total:e.total},on:{"update:page":function(t){e.page=t},"update:size":function(t){e.size=t},getTableData:e.getListYzlb}})],1):e._e(),t("el-dialog",{attrs:{title:this.operationType?"新增数据源":"编辑数据源",visible:e.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{ref:"typeForm",attrs:{model:e.typeForm,"label-width":"160px",rules:e.subFormRules}},[t("el-form-item",{attrs:{label:"数据源名称：",prop:"sourceName"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入数据源名称",maxlength:"32","auto-complete":"off"},model:{value:e.typeForm.sourceName,callback:function(t){e.$set(e.typeForm,"sourceName",t)},expression:"typeForm.sourceName"}})],1),t("el-form-item",{attrs:{label:"数据源类型：",prop:"sourceType"}},[t("el-select",{staticStyle:{width:"80%"},attrs:{disabled:"",placeholder:"根据连接地址自动生成(支持sqlserver、postgresql、mysql)"},model:{value:e.typeForm.sourceType,callback:function(t){e.$set(e.typeForm,"sourceType",t)},expression:"typeForm.sourceType"}},e._l(e.stOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"连接地址：",prop:"connectAdress"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入连接地址",maxlength:"300","auto-complete":"off"},model:{value:e.typeForm.connectAdress,callback:function(t){e.$set(e.typeForm,"connectAdress",t)},expression:"typeForm.connectAdress"}})],1),t("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户名",maxlength:"32","auto-complete":"off"},model:{value:e.typeForm.userName,callback:function(t){e.$set(e.typeForm,"userName",t)},expression:"typeForm.userName"}})],1),t("el-form-item",{attrs:{label:"密码：",prop:"password"}},[t("el-input",{staticClass:"pwd-input",staticStyle:{width:"80%"},attrs:{placeholder:"请输入密码",maxlength:"50","auto-complete":"off",type:e.type},model:{value:e.typeForm.password,callback:function(t){e.$set(e.typeForm,"password",t)},expression:"typeForm.password"}},[t("i",{staticClass:"icon-style",class:e.elIcon,attrs:{slot:"suffix",autocomplete:"auto"},on:{click:function(t){e.flag=!e.flag}},slot:"suffix"})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.checkConnect.apply(null,arguments)}}},[e._v("\n        测试连接\n      ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitTypeForm.apply(null,arguments)}}},[e._v("\n        保存\n      ")]),t("el-button",{nativeOn:{click:function(t){return e.closeDialog.apply(null,arguments)}}},[e._v("关闭")])],1)],1)],1)},n=[],a=(r("ac67"),r("1bc7"),r("32ea"),r("7afe"),r("824a")),s=r("f13c"),i=r("ae5e"),c=r("acac"),l=r("2ad3"),u=r("e0e5"),p=r("fd63"),f=r("e4a1"),d=r("a349"),y=r("6407");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e){var t=g();return function(){var r,o=Object(u["a"])(e);if(t){var n=Object(u["a"])(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(l["a"])(this,r)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c["a"])(r,e);var t=h(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.page=1,e.size=10,e.total=0,e.keyword="",e.sourceListDatas=[],e.operationType=1,e.showDialog=!1,e.stOptions=[],e.typeForm={sourceName:"",sourceType:"",connectAdress:"",userName:"",password:""},e.id=0,e.subFormRules={sourceName:[{required:!0,message:"数据源名称为必填项",trigger:"blur"}],userName:[{required:!0,message:"用户名为必填项",trigger:"blur"}],connectAdress:[{required:!0,message:"连接地址为必填项",trigger:"blur"}],sourceType:[{required:!0,message:"数据源类型无法识别(支持sqlserver、postgresql、mysql)",trigger:"blur"}],password:[{required:!0,message:"密码为必填项",trigger:"blur"}]},e.isLoading=!1,e.flag=!1,e}return Object(i["a"])(r,[{key:"type",get:function(){return this.flag?"text":"password"}},{key:"elIcon",get:function(){return this.flag?"el-icon-minus":"el-icon-view"}},{key:"mounted",value:function(){this.getListYzlb()}},{key:"setDataSourceType",value:function(){this.typeForm.connectAdress&&(this.typeForm.connectAdress.toLowerCase().indexOf("mysql")>-1?this.typeForm.sourceType="MYSQL":this.typeForm.connectAdress.toLowerCase().indexOf("postgresql")>-1?this.typeForm.sourceType="POSTGRESQL":this.typeForm.connectAdress.toLowerCase().indexOf("sqlserver")>-1?this.typeForm.sourceType="SQL_SERVER":this.typeForm.sourceType="")}},{key:"beforeGetListYzlb",value:function(){this.page=1,this.getListYzlb()}},{key:"getListYzlb",value:function(){var e=this,t={name:this.keyword,start:this.page-1,size:this.size};this.$api.getByNamePage(t).then((function(t){t.data&&(e.sourceListDatas=t.data.content||[],e.total=t.data.totalElements||0)})).catch((function(e){}))}},{key:"handleAddBtnClick",value:function(){var e=this;this.operationType=1,this.id=0,this.typeForm={sourceName:"",sourceType:"",connectAdress:"",userName:"",password:""},this.showDialog=!0,this.$nextTick((function(){e.$refs.typeForm.clearValidate()})),this.initstOptions()}},{key:"handleEditBtnClick",value:function(e){var t=this;this.id=e.id,this.operationType=0,this.typeForm={sourceName:e.name,sourceType:e.dbClass,connectAdress:e.serverName,userName:e.account,password:e.password},this.showDialog=!0,this.$nextTick((function(){t.$refs.typeForm.clearValidate()})),this.initstOptions()}},{key:"initstOptions",value:function(){this.stOptions=[{id:"SQL_SERVER",name:"SQL Server数据库"},{id:"POSTGRESQL",name:"PostgreSQL数据库"},{id:"MYSQL",name:"Mysql数据库"}]}},{key:"closeDialog",value:function(){this.showDialog=!1}},{key:"submitTypeForm",value:function(){var e=this;this.setDataSourceType(),this.$refs.typeForm.validate((function(t){if(t){var r=e.operationType?"添加成功！":"修改成功！",o={name:e.typeForm.sourceName,serverName:e.typeForm.connectAdress,account:e.typeForm.userName,password:e.typeForm.password,dbClass:e.typeForm.sourceType};e.operationType?e.$api.editDBConfig(o).then((function(t){e.$message({message:r,type:"success"}),e.showDialog=!1,e.getListYzlb()})).catch((function(e){})):e.$api.editDBConfig(b(b({},o),{},{id:e.id})).then((function(t){e.$message({message:r,type:"success"}),e.showDialog=!1,e.getListYzlb()})).catch((function(e){}))}}))}},{key:"checkConnect",value:function(){var e=this;this.isLoading=!0,this.setDataSourceType();var t={id:0===this.id?null:this.id,dbClass:this.typeForm.sourceType,serverName:this.typeForm.connectAdress,account:this.typeForm.userName,password:this.typeForm.password};this.$api.checkDbConnect(t).then((function(t){200===t.status&&e.$message.success("数据连接成功！ "),e.isLoading=!1})).catch((function(t){e.$message.error("数据连接失败！ "),e.isLoading=!1}))}},{key:"handleDel",value:function(e){var t=this;this.$confirm("确认删除【"+e.name+"】数据源吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={id:e.id};t.$api.deleteDBConfig(r).then((function(e){200===e.status&&t.$message.success("删除该数据成功！"),t.getListYzlb()})).catch((function(e){}))})).catch((function(){}))}}]),r}(f["c"]);Object(p["a"])([d["a"]],v.prototype,"userCode",void 0),v=Object(p["a"])([Object(f["a"])({name:"sourceDispose",components:{pagination:y["a"]}})],v);var O=v,w=O,k=(r("95fb"),r("0b56")),j=Object(k["a"])(w,o,n,!1,null,"6e23642e",null);t["default"]=j.exports},"3b64":function(e,t,r){},6407:function(e,t,r){"use strict";var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total,"pager-count":e.pagerCount},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},n=[],a=(r("7afe"),r("f13c")),s=r("ae5e"),i=r("acac"),c=r("2ad3"),l=r("e0e5"),u=r("fd63"),p=r("e4a1");function f(e){var t=d();return function(){var r,o=Object(l["a"])(e);if(t){var n=Object(l["a"])(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(c["a"])(this,r)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(i["a"])(r,e);var t=f(r);function r(){return Object(a["a"])(this,r),t.apply(this,arguments)}return Object(s["a"])(r,[{key:"currentPage",get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},{key:"pageSize",get:function(){return this.size},set:function(e){this.$emit("update:size",e)}},{key:"handleSizeChange",value:function(e){this.currentPage=1,this.$emit("getTableData")}},{key:"handleCurrentChange",value:function(e){this.$emit("getTableData")}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])({required:!0})],y.prototype,"total",void 0),Object(u["a"])([Object(p["b"])({default:1})],y.prototype,"page",void 0),Object(u["a"])([Object(p["b"])({default:10})],y.prototype,"size",void 0),Object(u["a"])([Object(p["b"])({default:7})],y.prototype,"pagerCount",void 0),Object(u["a"])([Object(p["b"])({default:function(){return[10,20,30,50]}})],y.prototype,"pageSizes",void 0),Object(u["a"])([Object(p["b"])({default:"total, sizes, prev, pager, next, jumper"})],y.prototype,"layout",void 0),y=Object(u["a"])([Object(p["a"])({name:"pagination"})],y);var m=y,b=m,h=(r("84c7"),r("0b56")),g=Object(h["a"])(b,o,n,!1,null,"7e267c7f",null);t["a"]=g.exports},"84c7":function(e,t,r){"use strict";r("f180")},"95fb":function(e,t,r){"use strict";r("3b64")},a349:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var o=r("3753"),n=r("7736"),a=s("computed",n["e"]);s("computed",n["c"]),s("methods",n["b"]),s("methods",n["d"]);function s(e,t){function r(r,n){return Object(o["a"])((function(o,a){o[e]||(o[e]={});var s,i=(s={},s[a]=r,s);o[e][a]=void 0!==n?t(n,i)[a]:t(i)[a]}))}function n(e,t){if("string"===typeof t){var o=t,n=e;return r(o,void 0)(n,o)}var a=i(t),s=e;return r(s,a)}return n}function i(e){var t=e&&e.namespace;if("string"===typeof t)return"/"!==t[t.length-1]?t+"/":t}},f180:function(e,t,r){}}]);