(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c240352"],{"107c":function(e,s,t){var a=t("d039"),r=t("da84"),i=r.RegExp;e.exports=a((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"129f":function(e,s){e.exports=Object.is||function(e,s){return e===s?0!==e||1/e===1/s:e!=e&&s!=s}},"14c3":function(e,s,t){var a=t("da84"),r=t("c65b"),i=t("825a"),n=t("1626"),o=t("c6b6"),c=t("9263"),l=a.TypeError;e.exports=function(e,s){var t=e.exec;if(n(t)){var a=r(t,e,s);return null!==a&&i(a),a}if("RegExp"===o(e))return r(c,e,s);throw l("RegExp#exec called on incompatible receiver")}},"23fe":function(e,s,t){"use strict";t("436b")},"436b":function(e,s,t){},"44e7":function(e,s,t){var a=t("861d"),r=t("c6b6"),i=t("b622"),n=i("match");e.exports=function(e){var s;return a(e)&&(void 0!==(s=e[n])?!!s:"RegExp"==r(e))}},"841c":function(e,s,t){"use strict";var a=t("c65b"),r=t("d784"),i=t("825a"),n=t("1d80"),o=t("129f"),c=t("577e"),l=t("dc4a"),d=t("14c3");r("search",(function(e,s,t){return[function(s){var t=n(this),r=void 0==s?void 0:l(s,e);return r?a(r,s,t):new RegExp(s)[e](c(t))},function(e){var a=i(this),r=c(e),n=t(s,a,r);if(n.done)return n.value;var l=a.lastIndex;o(l,0)||(a.lastIndex=0);var u=d(a,r);return o(a.lastIndex,l)||(a.lastIndex=l),null===u?-1:u.index}]}))},8863:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("el-container",{class:["basic_layout_container"]},[a("div",{staticClass:"backBox"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:t("d85d")}}),a("span",[e._v("患者360视图")])]),e.isFirstLogin?a("div",{staticClass:"loginCard"},[a("div",{staticClass:"title"},[a("div",{staticClass:"f1"},[e._v("欢迎登录")]),a("div",{staticClass:"f2"},[e._v("Welcome aboard")])]),a("div",{staticClass:"login"},[a("div",{staticClass:"inputBox"},[a("div",{staticClass:"account"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:t("524c")}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入账号",onfocus:"this.placeholder=''",onblur:"this.placeholder='请输入账号'"},domProps:{value:e.username},on:{input:function(s){s.target.composing||(e.username=s.target.value)}}}),a("i",{staticClass:"close",on:{click:function(s){e.username=""}}},[a("img",{attrs:{src:t("0b16")}})])]),a("div",{staticClass:"password"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:t("7c1c")}})]),"checkbox"===e.types?a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"passwordInput",attrs:{placeholder:"请输入密码",onfocus:"this.placeholder=''",onblur:"this.placeholder='请输入密码'",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{change:function(s){var t=e.password,a=s.target,r=!!a.checked;if(Array.isArray(t)){var i=null,n=e._i(t,i);a.checked?n<0&&(e.password=t.concat([i])):n>-1&&(e.password=t.slice(0,n).concat(t.slice(n+1)))}else e.password=r}}}):"radio"===e.types?a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"passwordInput",attrs:{placeholder:"请输入密码",onfocus:"this.placeholder=''",onblur:"this.placeholder='请输入密码'",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{change:function(s){e.password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"passwordInput",attrs:{placeholder:"请输入密码",onfocus:"this.placeholder=''",onblur:"this.placeholder='请输入密码'",type:e.types},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),a("i",{staticClass:"close L2",on:{click:function(s){e.password=""}}},[a("img",{attrs:{src:t("0b16")}})]),a("i",{staticClass:"lookPassword",on:{click:e.checkPassword}},[a("img",{attrs:{src:t("1771")("./"+e.checkpasswordimages)}})])]),a("div",{staticClass:"institution"},[a("div",{staticClass:"cur-institution-wrapper"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:t("e254")}})]),a("el-select",{staticClass:"institution",attrs:{placeholder:"请选择机构名称"},model:{value:e.chooseInstitution,callback:function(s){e.chooseInstitution=s},expression:"chooseInstitution"}},e._l(e.institutions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1)],1)]),a("div",{staticClass:"memory"},[a("div",{staticClass:"remember",on:{click:e.rememberUsername}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isRememberPassword,expression:"isRememberPassword"}],staticClass:"ordinary-check",staticStyle:{zoom:"130%"},attrs:{id:"remember",type:"checkbox"},domProps:{checked:Array.isArray(e.isRememberPassword)?e._i(e.isRememberPassword,null)>-1:e.isRememberPassword},on:{change:function(s){var t=e.isRememberPassword,a=s.target,r=!!a.checked;if(Array.isArray(t)){var i=null,n=e._i(t,i);a.checked?n<0&&(e.isRememberPassword=t.concat([i])):n>-1&&(e.isRememberPassword=t.slice(0,n).concat(t.slice(n+1)))}else e.isRememberPassword=r}}}),a("label",{attrs:{for:"remember"}},[e._v("保存账号")])]),a("div",{staticClass:"forget",on:{click:function(s){e.showHelp=!e.showHelp}}},[e._v("忘记密码？")]),e.showHelp?a("div",{staticClass:"help hidden-block"},[e._v(" 请联系系统管理员获取帮助"),a("i")]):e._e()]),e.showErrorMessage?a("div",{staticClass:"misinput"},[e._v(" 用户名密码或机构错误，请重新输入 ")]):e._e(),a("div",{attrs:{id:"entry"},on:{click:e.handleLogin}},[a("span",[e._v(" 登录 ")])])])])]):e._e(),a("div",{attrs:{id:"footer"}},[a("span",{staticClass:"pull-right"},[e._v("© 2022 Winning Health 版权所有")])])])])},r=[],i=t("1da1"),n=(t("96cf"),t("ac1f"),t("841c"),t("1276"),t("d3b7"),t("498a"),t("e9c4"),t("27ae")),o=t("c1df"),c=t.n(o),l={name:"loginSso",data:function(){return{checkpasswordimages:"images/eyeClosed.png",types:"password",showErrorMessage:!1,isRememberPassword:!1,showHelp:!1,institutions:[],chooseInstitution:"",username:"",password:"",originalParam:{},isFirstLogin:!1}},created:function(){var e=window.location.search;this.initRequestParams(decodeURIComponent(e),this.originalParam),this.originalParam.ptflag&&("2"===this.originalParam.loginflag?(this.isFirstLogin=!1,this.handleLogin()):this.isFirstLogin=!0)},mounted:function(){this.getInstitutionList(),this.username=this.$storage.get("username")||"",this.username?this.isRememberPassword=!0:this.isRememberPassword=!1},methods:{initRequestParams:function(e,s){var t={};if(-1!==e.indexOf("?")){for(var a=e.substr(1),r=a.split("&"),i=0;i<r.length;i++)t[r[i].split("=")[0]]=r[i].split("=")[1];for(var n in t)s[n]=t[n]}var o=c()().format("YYYY-MM-DD HH:mm:ss");localStorage.setItem("nowTime",o),localStorage.setItem("isSsoLogin",1),this.originalParam.portalurl&&localStorage.setItem("portalurl",this.originalParam.portalurl)},rememberUsername:function(){this.isRememberPassword?this.$storage.remove("username"):this.$storage.set("username",this.username)},checkPassword:function(){"images/eyeClosed.png"===this.checkpasswordimages?(this.checkpasswordimages="images/eyeOpen.png",this.types="text"):(this.checkpasswordimages="images/eyeClosed.png",this.types="password")},getInstitutionList:function(){var e=this;return new Promise((function(s,t){e.$api.getAllInstitutions().then((function(t){var a=t.data;e.institutions=a,s()}))}))},handleLogin:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var t;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("2"===e.originalParam.loginflag||""!==e.username.trim()&&""!==e.password.trim()&&""!==e.chooseInstitution){s.next=3;break}return e.$message({showClose:!0,message:"账户名或密码或医疗机构为必选",type:"warning"}),s.abrupt("return",!1);case 3:return s.next=5,e.$api.getAllSysConfig();case 5:t=s.sent,t.data&&localStorage.setItem("allSysConfig",JSON.stringify(t.data)),t.data&&t.data.cdssUrl&&localStorage.setItem("cdssUrl",t.data.cdssUrl),e.originalParam.usercode=e.username.trim()?n["Base64"].encode(e.username.trim()):"",e.originalParam.password=e.password.trim()?n["Base64"].encode(e.password.trim()):"",e.originalParam.yljgdm=e.chooseInstitution?n["Base64"].encode(e.chooseInstitution):"",e.$api.loginFromSSO(e.originalParam).then((function(s){if("SUCCESS"===s.message){e.$store.commit("SET_TOKEN",s.data.token),e.$storage.set("username",e.originalParam.loginid);var t={ipAddress:s.data.ipAddress,fullname:s.data.fullname,yljgdm:s.data.jgdm,jgmc:s.data.jgmc,headPath:s.data.headPath,usercode:s.data.usercode,userId:s.data.userId,isTopShow:s.data.isTopShow,passwordExpiryDate:s.data.passwordExpiryDate,passwordExpirySwitch:s.data.passwordExpirySwitch,roleTypeCode:s.data.roleTypeCode};e.$store.commit("USER_MESSAGE",t),localStorage.setItem("roleType",s.data.roleType),e.$router.push({path:"/suffererView"})}else{if("2"!==e.originalParam.loginflag)return e.$message({showClose:!0,message:"登录失败：用户名、密码或机构错误",type:"warning"}),e.showErrorMessage=!0,!1;window.location.href=e.originalParam.authfailurl}})).catch((function(){if("2"!==e.originalParam.loginflag)return e.$message({showClose:!0,message:"登录失败",type:"warning"}),e.showErrorMessage=!0,!1;window.location.href=e.originalParam.authfailurl}));case 12:case"end":return s.stop()}}),s)})))()}}},d=l,u=(t("23fe"),t("2877")),p=Object(u["a"])(d,a,r,!1,null,"e8534a3e",null);s["default"]=p.exports},"8aa5":function(e,s,t){"use strict";var a=t("6547").charAt;e.exports=function(e,s,t){return s+(t?a(e,s).length:1)}},9263:function(e,s,t){"use strict";var a=t("c65b"),r=t("e330"),i=t("577e"),n=t("ad6d"),o=t("9f7f"),c=t("5692"),l=t("7c73"),d=t("69f3").get,u=t("fce3"),p=t("107c"),m=c("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,h=g,f=r("".charAt),v=r("".indexOf),w=r("".replace),x=r("".slice),b=function(){var e=/a/,s=/b*/g;return a(g,e,"a"),a(g,s,"a"),0!==e.lastIndex||0!==s.lastIndex}(),y=o.BROKEN_CARET,C=void 0!==/()??/.exec("")[1],I=b||C||y||u||p;I&&(h=function(e){var s,t,r,o,c,u,p,I=this,P=d(I),k=i(e),R=P.raw;if(R)return R.lastIndex=I.lastIndex,s=a(h,R,k),I.lastIndex=R.lastIndex,s;var E=P.groups,S=y&&I.sticky,_=a(n,I),A=I.source,$=0,T=k;if(S&&(_=w(_,"y",""),-1===v(_,"g")&&(_+="g"),T=x(k,I.lastIndex),I.lastIndex>0&&(!I.multiline||I.multiline&&"\n"!==f(k,I.lastIndex-1))&&(A="(?: "+A+")",T=" "+T,$++),t=new RegExp("^(?:"+A+")",_)),C&&(t=new RegExp("^"+A+"$(?!\\s)",_)),b&&(r=I.lastIndex),o=a(g,S?t:I,T),S?o?(o.input=x(o.input,$),o[0]=x(o[0],$),o.index=I.lastIndex,I.lastIndex+=o[0].length):I.lastIndex=0:b&&o&&(I.lastIndex=I.global?o.index+o[0].length:r),C&&o&&o.length>1&&a(m,o[0],t,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(o[c]=void 0)})),o&&E)for(o.groups=u=l(null),c=0;c<E.length;c++)p=E[c],u[p[0]]=o[p[1]];return o}),e.exports=h},"9f7f":function(e,s,t){var a=t("d039"),r=t("da84"),i=r.RegExp,n=a((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),o=n||a((function(){return!i("a","y").sticky})),c=n||a((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:o,UNSUPPORTED_Y:n}},ac1f:function(e,s,t){"use strict";var a=t("23e7"),r=t("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},d784:function(e,s,t){"use strict";t("ac1f");var a=t("e330"),r=t("6eeb"),i=t("9263"),n=t("d039"),o=t("b622"),c=t("9112"),l=o("species"),d=RegExp.prototype;e.exports=function(e,s,t,u){var p=o(e),m=!n((function(){var s={};return s[p]=function(){return 7},7!=""[e](s)})),g=m&&!n((function(){var s=!1,t=/a/;return"split"===e&&(t={},t.constructor={},t.constructor[l]=function(){return t},t.flags="",t[p]=/./[p]),t.exec=function(){return s=!0,null},t[p](""),!s}));if(!m||!g||t){var h=a(/./[p]),f=s(p,""[e],(function(e,s,t,r,n){var o=a(e),c=s.exec;return c===i||c===d.exec?m&&!n?{done:!0,value:h(s,t,r)}:{done:!0,value:o(t,s,r)}:{done:!1}}));r(String.prototype,e,f[0]),r(d,p,f[1])}u&&c(d[p],"sham",!0)}},fce3:function(e,s,t){var a=t("d039"),r=t("da84"),i=r.RegExp;e.exports=a((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);